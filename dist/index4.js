var C="function"==typeof Object.defineProperties?Object.defineProperty:function(y,x,f){if(y==Array.prototype||y==Object.prototype)return y;y[x]=f.value;return y};function F(y){y=["object"==typeof globalThis&&globalThis,y,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var x=0;x<y.length;++x){var f=y[x];if(f&&f.Math==Math)return f}throw Error("Cannot find global object");}var G=F(this);
function I(y,x){if(x)a:{var f=G;y=y.split(".");for(var u=0;u<y.length-1;u++){var z=y[u];if(!(z in f))break a;f=f[z]}y=y[y.length-1];u=f[y];x=x(u);x!=u&&null!=x&&C(f,y,{configurable:!0,writable:!0,value:x})}}var J;if("function"==typeof Object.setPrototypeOf)J=Object.setPrototypeOf;else{var K;a:{var L={a:!0},N={};try{N.__proto__=L;K=N.a;break a}catch(y){}K=!1}J=K?function(y,x){y.__proto__=x;if(y.__proto__!==x)throw new TypeError(y+" is not extensible");return y}:null}var Q=J;
I("Object.setPrototypeOf",function(y){return y||Q});function U(y){var x=0;return function(){return x<y.length?{done:!1,value:y[x++]}:{done:!0}}}I("Symbol",function(y){function x(r){if(this instanceof x)throw new TypeError("Symbol is not a constructor");return new f(u+(r||"")+"_"+z++,r)}function f(r,n){this.Mb=r;C(this,"description",{configurable:!0,writable:!0,value:n})}if(y)return y;f.prototype.toString=function(){return this.Mb};var u="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",z=0;return x});
I("Symbol.iterator",function(y){if(y)return y;y=Symbol("Symbol.iterator");for(var x="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),f=0;f<x.length;f++){var u=G[x[f]];"function"===typeof u&&"function"!=typeof u.prototype[y]&&C(u.prototype,y,{configurable:!0,writable:!0,value:function(){return V(U(this))}})}return y});function V(y){y={next:y};y[Symbol.iterator]=function(){return this};return y}
function W(y,x){y instanceof String&&(y+="");var f=0,u=!1,z={next:function(){if(!u&&f<y.length){var r=f++;return{value:x(r,y[r]),done:!1}}u=!0;return{done:!0,value:void 0}}};z[Symbol.iterator]=function(){return z};return z}I("Array.prototype.keys",function(y){return y?y:function(){return W(this,function(x){return x})}});
I("Array.prototype.fill",function(y){return y?y:function(x,f,u){var z=this.length||0;0>f&&(f=Math.max(0,z+f));if(null==u||u>z)u=z;u=Number(u);0>u&&(u=Math.max(0,z+u));for(f=Number(f||0);f<u;f++)this[f]=x;return this}});function X(y){return y?y:Array.prototype.fill}I("Int8Array.prototype.fill",X);I("Uint8Array.prototype.fill",X);I("Uint8ClampedArray.prototype.fill",X);I("Int16Array.prototype.fill",X);I("Uint16Array.prototype.fill",X);I("Int32Array.prototype.fill",X);
I("Uint32Array.prototype.fill",X);I("Float32Array.prototype.fill",X);I("Float64Array.prototype.fill",X);
var Y=this&&this.Mb||function(){function y(x,f){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,z){u.__proto__=z}||function(u,z){for(var r in z)Object.prototype.hasOwnProperty.call(z,r)&&(u[r]=z[r])};return y(x,f)}return function(x,f){function u(){this.constructor=x}if("function"!==typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");y(x,f);x.prototype=null===f?Object.create(f):(u.prototype=f.prototype,new u)}}();
define("core/base/BaseBean",["require","exports"],function(y,x){Object.defineProperty(x,"__esModule",{value:!0});x.ea=x.ca=x.Xa=x.la=x.h=void 0;y=function(){return function(u,z){this.Y="41";this.y=this.x=0;this.x=u;this.y=z}}();x.h=y;var f=function(u){function z(r,n,e){void 0===e&&(e=0);r=u.call(this,r,n)||this;r.type=0;r.type=e;r.Y="42";return r}Y(z,u);return z}(y);x.la=f;y=function(u){function z(r,n,e){void 0===e&&(e=0);r=u.call(this,r,n)||this;r.O=0;r.O=e;r.Y="43";return r}Y(z,u);return z}(y);
x.Xa=y;x.ca=function(){function u(){}u.click="click";u.vd="dblclick";u.Gd="mousedown";u.fd="mouseup";u.ed="mousemove";u.dd="mouseenterleave";u.Dd="dragmousemove";u.anchor="anchor";u.scale="scale";u.onclick="onclick";u.ondblclick="ondblclick";u.onmousedown="onmousedown";u.onmouseup="onmouseup";u.onmouseenter="onmouseenter";u.onmouseleave="onmouseleave";u.onmousemove="onmousemove";u.Ta="ondragmousemove";u.Rb="onanchor";u.Sb="onunanchor";return u}();x.ea=function(){function u(){}u.default="default";
u.move="move";u.Jb="crosshair";u.Yb="se-resize";u.Qb="ne-resize";return u}()});
define("core/base/Pen",["require","exports"],function(y,x){Object.defineProperty(x,"__esModule",{value:!0});x.Ha=void 0;y=function(){function f(){this.Y="31";this.strokeStyle=this.fillStyle="#000000";this.H=!1;this.C=this.M=!0;this.lineWidth=1}f.prototype.sa=function(u,z){this.H&&this.fillStyle&&(u.fillStyle=this.fillStyle);this.M&&this.strokeStyle&&(u.strokeStyle=this.strokeStyle,u.lineWidth=this.lineWidth);this.show(u,z)};return f}();x.Ha=y});
define("layer/BeanFactory","require exports core/base/BaseBean core/base/BaseShape process/ProcProc core/base/LinkLine util/CommonUtil".split(" "),function(y,x,f,u,z,r,n){Object.defineProperty(x,"__esModule",{value:!0});x.Db=void 0;x.Db=function(){function e(){}e.createNode=function(a){var b=n.K.V(),h=null;switch(a){case "11":h=new z.ic(b,new f.h(0,0),100,60,[],!1);break;case "12":h=new z.ac(b,new f.h(0,0),100,60,[],!1);break;case "13":h=new z.dc(b,new f.h(0,0),100,60,[],!1);break;case "14":h=new z.cc(b,
new f.h(0,0),60,60,[],!1);break;case "15":h=new z.hc(b,new f.h(0,0),100,60,[],!1);break;case "16":h=new z.ec(b,new f.h(0,0),100,60,[],!1)}return h};e.td=function(a){var b=null;switch(a){case "32":b=new u.$b(new f.h(0,0),10,14,3);break;case "33":b=new u.Qc(new f.h(0,0),new f.h(1,1),new f.h(2,2));break;case "34":b=new u.pb([]);break;case "35":b=new u.Rect(new f.h(0,0),60,60);break;case "36":b=new u.bc(new f.h(0,0),100,60);break;case "37":b=new u.fc(new f.h(0,0),new f.h(0,0));break;case "8":b=new u.Kc(new f.h(0,
0),2);break;case "39":b=new u.U(new f.h(0,0),2);break;case "391":b=new u.Fb(null,new f.h(0,0),[],20)}return b};e.ud=function(a){var b=null;switch(a){case "41":b=new f.h(0,0);break;case "42":b=new f.la(0,0);break;case "43":b=new f.Xa(0,0)}return b};e.sd=function(a){var b=null;switch(a){case "21":b=new r.Aa(n.K.V(),new f.h(0,0),new f.h(200,200),0);break;case "22":b=new r.kc(n.K.V(),new f.h(0,0),new f.h(200,200),0)}return b};e.Wc=function(a){if(!a)return null;var b=null;switch(a.substr(0,1)){case "1":b=
e.createNode(a);break;case "2":b=e.sd(a);break;case "3":b=e.td(a);break;case "4":b=e.ud(a)}return b};return e}()});
define("util/CommonUtil",["require","exports","core/base/LinkLine","core/base/Node","layer/BeanFactory"],function(y,x,f,u,z){Object.defineProperty(x,"__esModule",{value:!0});x.K=void 0;x.K=function(){function r(){}r.V=function(){return Date.now()+"_"+Math.ceil(100*Math.random())+"_"+Math.ceil(100*Math.random())+"_"+Math.ceil(100*Math.random())};r.Bb=function(n){if(!n)return n;if(n instanceof Array){var e=[];if(1>n.length)return e;if(n[0]instanceof u.Node||n[0]instanceof f.Aa)return null;for(var a=
0;a<n.length;a++){var b=n[a];if(b)switch(typeof b){case "bigint":case "number":case "string":case "boolean":e[a]=b;break;case "object":b instanceof u.Node||b instanceof f.Aa||(e[a]=r.Bb(b))}else e[a]=null}return e}e=0;var h={},t=Object.keys(n);for(a=0;a<t.length;a++){b=t[a];var w=Object.getOwnPropertyDescriptor(n,b);if(w)if(w.value)switch(typeof w.value){case "bigint":case "number":case "string":case "boolean":h[b]=w.value;e++;break;case "object":w.value instanceof u.Node||w.value instanceof f.Aa||
(w=r.Bb(w.value))&&(h[b]=w)}else h[b]=null}return 0>=e?null:h};r.Ab=function(n){if(!n)return n;if(n instanceof Array){var e=[];if(1>n.length)return e;if(n[0]instanceof f.Aa)return null;for(var a=0;a<n.length;a++){var b=n[a];if(b)switch(typeof b){case "bigint":case "number":case "string":case "boolean":e[a]=b;break;case "object":b instanceof f.Aa||(e[a]=b instanceof u.Node?{objtype:b.Y,id:b.id}:r.Ab(b))}else e[a]=null}return e}e={};var h=0,t=Object.keys(n);for(a=0;a<t.length;a++)if(b=t[a],"linePath"!=
b){var w=Object.getOwnPropertyDescriptor(n,b);if(w)if(w.value)switch(typeof w.value){case "bigint":case "number":case "string":case "boolean":e[b]=w.value;h++;break;case "object":w.value instanceof f.Aa||(w.value instanceof u.Node?e[b]={objtype:w.value.Y,id:w.value.id}:(w=r.Ab(w.value))&&(e[b]=w))}else e[b]=null}return 0>=h?null:e};r.Xc=function(n){if(!n)return null;var e=Object.getOwnPropertyDescriptor(n,"objtype");return e&&e.value&&"string"==typeof e.value?((e=z.Db.Wc(e.value))&&r.oc(e,n),e):null};
r.oc=function(n,e){if(n&&e)for(var a=Object.keys(e),b=Object.keys(n),h=0;h<a.length;h++){var t=a[h],w=Object.getOwnPropertyDescriptor(e,t);if(w)if(w.value){var A=typeof w.value;if(0>b.indexOf(t))"object"==A?(A=r.Xc(w.value))?Object.defineProperty(n,t,{value:A,configurable:!0,writable:!0}):Object.defineProperty(n,t,w):Object.defineProperty(n,t,w);else{var B=Object.getOwnPropertyDescriptor(n,t);if(!B||!B.value)"object"==A?(A=r.Xc(w.value))?Object.defineProperty(n,t,{value:A,configurable:!0,writable:!0}):
Object.defineProperty(n,t,w):Object.defineProperty(n,t,w);else if(A==typeof B.value)switch(A){case "bigint":case "number":case "string":case "boolean":case "undefined":Object.defineProperty(n,t,w);break;case "object":r.oc(B.value,w.value)}}}else Object.defineProperty(n,t,w)}};r.Yc=function(n,e){if(!e)return null;var a=Object.getOwnPropertyDescriptor(e,"objtype");if(a&&a.value&&"string"==typeof a.value)if("1"==a.value.charAt(0)){if((e=Object.getOwnPropertyDescriptor(e,"id"))&&e.value&&"string"==typeof e.value)for(a=
0;a<n.I.length;a++){var b=n.I[a];if(e.value==b.id)return b}}else return(a=z.Db.Wc(a.value))&&r.pc(n,a,e),a;return null};r.pc=function(n,e,a){if(e&&a)for(var b=Object.keys(a),h=Object.keys(e),t=0;t<b.length;t++){var w=b[t],A=Object.getOwnPropertyDescriptor(a,w);if(A)if(A.value){var B=typeof A.value;if(0>h.indexOf(w))"object"==B?(B=r.Yc(n,A.value))?Object.defineProperty(e,w,{value:B,configurable:!0,writable:!0}):Object.defineProperty(e,w,A):Object.defineProperty(e,w,A);else{var D=Object.getOwnPropertyDescriptor(e,
w);if(!D||!D.value)"object"==B?(B=r.Yc(n,A.value))?Object.defineProperty(e,w,{value:B,configurable:!0,writable:!0}):Object.defineProperty(e,w,A):Object.defineProperty(e,w,A);else if(B==typeof D.value)switch(B){case "bigint":case "number":case "string":case "boolean":case "undefined":Object.defineProperty(e,w,A);break;case "object":r.pc(n,D.value,A.value)}}}else Object.defineProperty(e,w,A)}};return r}()});
define("layer/DrawLayer","require exports core/base/BaseBean core/base/LinkLine core/base/Node util/CommonUtil layer/Action layer/BeanFactory".split(" "),function(y,x,f,u,z,r,n,e){Object.defineProperty(x,"__esModule",{value:!0});x.Lc=void 0;y=function(){function a(b){this.Hd=[f.ca.click,f.ca.vd,f.ca.Gd,f.ca.fd,f.ca.Dd,f.ca.dd];this.I=[];this.lines=[];this.ab={};this.rb=this.Tb=this.za=this.ta=this.Ib=this.anchorNode=this.ka=this.Ra=null;this.qa=new u.Aa(r.K.V(),new f.h(0,0),new f.h(0,0),0);this.ub=
!1;this.ad="11";this.P=!1;this.Oa=new f.h(1,1);this.bb=!1;this.A=this.S=null;this.G=new f.h(0,0);this.yc=0;this.Lb="";this.L=this.R=null;this.Sa=new f.h(0,0);this.mb=new f.h(0,0);this.La=this.$a=null;this.Nb=10;this.Ob=1;this.maxHeight=this.maxWidth=15E3;this.Ca=this.ua=0;this.rd="#FFFFFF";this.Gb=!1;this.hb=null;this.hd={};this.yb=[];this.Kb=this.tb=this.wc=this.vc=!1;if(this.id=b)if(b=document.getElementById(b)){var h=document.documentElement.clientWidth,t=document.documentElement.clientHeight;
this.A=document.createElement("canvas");this.A.width=h;this.A.height=t;b.appendChild(this.A);if(this.S=this.A.getContext("2d")){this.S.imageSmoothingEnabled=!0;var w=window.devicePixelRatio;this.ua=h;this.Ca=t;this.A.style.width=h+"px";this.A.style.height=t+"px";this.A.width=h*w;this.A.height=t*w;this.S.scale(w,w);this.R=document.createElement("div");this.R.className="textEditArea";this.R.style.visibility="hidden";this.R.contentEditable="true";this.R.style.Mb="#0000FF";h=function(B){B.stopPropagation()};
this.R.addEventListener("keydown",h);this.R.addEventListener("keypress",h);this.R.addEventListener("keyup",h);b.appendChild(this.R);this.L=document.createElement("div");this.L.className="lineTextEditArea";this.L.style.visibility="hidden";this.L.contentEditable="true";this.L.style.Mb="#0000FF";this.L.addEventListener("keydown",h);this.L.addEventListener("keypress",h);var A=this;this.L.addEventListener("keyup",function(B){A.Ed();B.stopPropagation()});b.appendChild(this.L);this.hb=document.createElement("a");
this.hb.style.display="none";this.Ac()}}}a.prototype.ya=function(b){200<this.yb.length&&this.I.splice(0,1);this.yb.push(b)};a.prototype.Cd=function(){var b=this.yb.length-1;if(0<=b){var h=this.yb[b];this.yb.splice(b,1);h.back(this);this.P=!0}};a.prototype.Ed=function(){if(this.L){var b=this.L.offsetWidth-this.mb.x;0!=b&&(this.mb.x=this.L.offsetWidth,this.Sa.x-=b/2,this.L.style.left=this.Sa.x+"px");b=this.L.offsetHeight-this.mb.y;0!=b&&(this.mb.y=this.L.offsetHeight,this.Sa.y-=b/2,this.L.style.top=
this.Sa.y+"px")}};a.prototype.saveData=function(){for(var b=[],h=0;h<this.I.length;h++){var t=r.K.Bb(this.I[h]);b.push(t)}this.hd.nodes=r.K.Bb(b);b=[];for(h=0;h<this.lines.length;h++)t=r.K.Ab(this.lines[h]),b.push(t);this.hd.lines=r.K.Ab(b)};a.prototype.Ud=function(){if(this.A&&this.S&&this.hb){var b=this.Gb;b||(this.Gb=!0,this.sa());var h=this.A.toDataURL("image/png");this.Gb=b;this.hb.download=Date.now()+".png";this.hb.href=h;this.hb.click()}};a.prototype.Vc=function(b){if(0==b||2==b)this.qa.type=
b,this.za&&this.za.type!=b&&(this.za.type=b,this.za.ra(),this.sa())};a.prototype.Yd=function(b,h){h||(h=this.lines.indexOf(b));0<=h&&h!=this.lines.length-1&&(this.lines.splice(h,1),this.lines.push(b))};a.prototype.Zd=function(b,h){h||(h=this.I.indexOf(b));0<=h&&h!=this.I.length-1&&(this.I.splice(h,1),this.I.push(b))};a.prototype.Hc=function(b,h,t){t||(t=h.indexOf(b));0<=t&&t!=h.length-1&&(h.splice(t,1),h.push(b))};a.prototype.Fa=function(b){0>this.I.indexOf(b)&&(this.I.push(b),this.od(b))};a.prototype.tc=
function(b){var h=this.I.indexOf(b);0<=h&&this.I.splice(h,1);if(b instanceof z.Ba){for(var t=0;t<b.fa.length;t++)h=b.fa[t],h.u=null,h.D=null;for(t=0;t<b.ga.length;t++)h=b.ga[t],h.v=null,h.fromPoint=null}this.anchorNode==b&&(this.anchorNode=null);for(t in this.ab)if(h=this.ab[t]){var w=h.indexOf(b);0<=w&&h.splice(w,1)}};a.prototype.mc=function(b){0>this.lines.indexOf(b)&&this.lines.push(b)};a.prototype.wd=function(b){var h=this.lines.indexOf(b);0<=h&&(this.ya(new n.Nc(b)),this.lines.splice(h,1));b.v&&
b.v.rc(b);b.u&&b.u.sc(b);this.za==b&&(this.za=null)};a.prototype.sa=function(){if(this.A&&this.S){this.Gb?(this.S.fillStyle=this.rd,this.S.fillRect(0,0,this.A.width,this.A.height)):this.S.clearRect(0,0,this.A.width,this.A.height);if(0<this.I.length)for(var b=0;b<this.I.length;b++){var h=this.I[b];h.show(this.S)}if(0<this.lines.length)for(b=0;b<this.lines.length;b++)h=this.lines[b],h.show(this.S)}this.P=!1};a.prototype.od=function(b){for(var h="mouseup mousedown dragmousemove mouseenterleave unanchor anchor click dblclick".split(" "),
t=0;t<h.length;t++){var w=h[t];if(!(0>this.Hd.indexOf(w))){var A=this.ab[w];A||(A=[],this.ab[w]=A);A.push(b)}}};a.prototype.Ad=function(b){var h=this.G.x,t=this.G.y;if(this.ta)return this.ta.na(this),this.P&&this.sa(),!0;for(var w=this.lines.length-1;-1<w;w--){var A=this.lines[w];if(A.na(this))return this.Yd(A,w),this.P&&this.sa(),!0}return 1==b.buttons&&b.type==f.ca.ed&&this.qa.v&&this.qa.fromPoint?(b=new u.kc(r.K.V(),new f.h(0,0),new f.h(h,t),this.qa.type),this.qa.v.lc(b,this.qa.fromPoint),this.mc(b),
b.oa=b.g,this.qa.v=null,this.qa.fromPoint=null,this.ta=b,this.tb=!0):!1};a.prototype.Bd=function(b){return 1==b.buttons&&"mousemove"==b.type&&this.ub&&(this.ub=!1,b=e.Db.createNode(this.ad))?(this.Fa(b),b.lb.x=-b.w/2,b.lb.y=-b.j/2,this.vc=!0,this.Ra=b,!0):!1};a.prototype.uc=function(b){if("mousedown"==b.type)if(this.$a&&this.$a.o&&this.R){for(var h=this.R.childNodes,t=[],w=0;w<h.length;w++){var A=h[w];t.push(A.textContent?A.textContent:"")}this.$a.o.C=!0;this.$a.o.Cb(t);this.$a=null;this.R.style.visibility=
"hidden";this.P=!0}else if(this.La&&this.La.o&&this.L){h=this.L.childNodes;t=[];for(w=0;w<h.length;w++)A=h[w],t.push(A.textContent?A.textContent:"");this.La.o.C=!0;this.La.o.Cb(t);this.S&&this.La.o.bd(this.S);this.La.Ec();this.La=null;this.L.style.visibility="hidden";this.P=!0}this.G.x=1==this.Oa.x?b.offsetX:b.offsetX/this.Oa.x;this.G.y=1==this.Oa.y?b.offsetY:b.offsetY/this.Oa.y;this.yc=b.buttons;this.Lb=b.type;if(!this.Bd(b)&&(!this.Ad(b)||"mousemove"==b.type&&this.ta)){if("mousemove"==b.type)this.Jc(b);
else if("mousedown"==b.type)this.Ic(b);else if(h=this.ab[b.type]){t=this.G.x;var B=this.G.y;"mouseup"==b.type&&(this.Ub(),this.qa.v=null,this.qa.fromPoint=null);for(w=h.length-1;-1<w;w--)if(A=h[w],t>A.p.x&&B>A.p.y&&t<A.p.x+A.w&&B<A.p.y+A.j){A.na(this,"on"+b.type);this.Hc(A,h,w);break}}this.P&&this.sa()}};a.prototype.Ic=function(b){if(1==b.buttons&&(b=this.ab[b.type])){for(var h=!1,t=this.G.x,w=this.G.y,A=b.length-1;-1<A;A--){var B=b[A];if(t>B.p.x&&w>B.p.y&&t<B.p.x+B.w&&w<B.p.y+B.j){h=!0;this.za=null;
this.anchorNode?this.anchorNode!=B&&(this.anchorNode.na(this,f.ca.Sb),this.anchorNode=B,this.anchorNode.na(this,f.ca.Rb)):(this.anchorNode=B,this.anchorNode.na(this,f.ca.Rb));B.na(this,f.ca.onmousedown);this.Zd(B,A);this.Hc(B,b,A);break}}!h&&this.anchorNode&&(this.anchorNode.na(this,f.ca.Sb),this.anchorNode=null)}};a.prototype.Jc=function(b){if(1==b.buttons&&this.Ra)this.wc||(this.wc=!0,this.ya(new n.fb(this.Ra))),this.Ra.na(this,f.ca.Ta);else{b=this.ab[f.ca.dd];var h=!1;if(b){for(var t=this.G.x,
w=this.G.y,A=b.length-1;-1<A;A--){var B=b[A];if(t>B.p.x&&w>B.p.y&&t<B.p.x+B.w&&w<B.p.y+B.j){h=!0;this.ka?this.ka!=B?(this.ka.na(this,f.ca.onmouseleave),this.ka=B,this.ka.na(this,f.ca.onmouseenter)):this.ta||(B.na(this,f.ca.onmousemove),this.Hc(B,b,A)):(this.ka=B,this.ka.na(this,f.ca.onmouseenter));break}}!h&&this.ka&&(this.ka.na(this,f.ca.onmouseleave),this.ka=null)}h||!this.A||this.A.style.cursor==f.ea.default||this.ta||(this.A.style.cursor=f.ea.default)}};a.prototype.yd=function(b){if(this.A)switch(b.key.toLowerCase()){case "backspace":case "delete":this.anchorNode?
(this.ya(new n.Pc(this.anchorNode)),this.tc(this.anchorNode),this.P=!0):this.za&&(this.wd(this.za),this.P=!0)}};a.prototype.xd=function(b){if(this.A&&this.S)switch(b.key.toLowerCase()){case "c":b.ctrlKey&&(this.anchorNode?(this.Ib=this.anchorNode,this.rb=null):(this.za?this.rb=this.za:this.rb=null,this.Ib=null));break;case "v":if(b.ctrlKey)if(this.Ib){b=this.Ib.clone();b.p.x+=5;b.p.y+=5;this.Fa(b);var h=new z.Node("-1",new f.h(0,0),1,1);h.id=b.id;this.ya(new n.jc(h));this.P=!0}else this.rb&&(b=this.rb.clone(),
b.from.x+=5,b.from.y+=5,b.g.x+=5,b.g.y+=5,b.ra(),this.mc(b),h=new u.Aa("-1",new f.h(0,0),new f.h(0,0),0),h.id=b.id,this.ya(new n.Eb(h)),this.P=!0);break;case "z":b.ctrlKey&&this.Cd();break;case "arrowdown":this.anchorNode&&this.anchorNode.p.y<this.maxHeight&&(this.ya(new n.fb(this.anchorNode)),this.anchorNode.p.y=b.shiftKey?this.anchorNode.p.y+this.Ob:this.anchorNode.p.y+this.Nb,this.anchorNode.p.y+this.anchorNode.j>this.Ca&&(b=window.devicePixelRatio,this.Ca+=100,this.A.style.height=this.Ca+"px",
this.A.height=this.Ca*b,this.S.scale(b,b)),this.anchorNode instanceof z.Ba&&this.anchorNode.ib(),this.P=!0);break;case "arrowup":this.anchorNode&&0<this.anchorNode.p.y+this.anchorNode.j&&(this.ya(new n.fb(this.anchorNode)),this.anchorNode.p.y=b.shiftKey?this.anchorNode.p.y-this.Ob:this.anchorNode.p.y-this.Nb,this.anchorNode instanceof z.Ba&&this.anchorNode.ib(),this.P=!0);break;case "arrowright":this.anchorNode&&this.anchorNode.p.x<this.maxWidth&&(this.ya(new n.fb(this.anchorNode)),this.anchorNode.p.x=
b.shiftKey?this.anchorNode.p.x+this.Ob:this.anchorNode.p.x+this.Nb,this.anchorNode.p.x+this.anchorNode.w>this.ua&&(b=window.devicePixelRatio,this.ua+=100,this.A.style.width=this.ua+"px",this.A.width=this.ua*b,this.S.scale(b,b)),this.anchorNode instanceof z.Ba&&this.anchorNode.ib(),this.P=!0);break;case "arrowleft":this.anchorNode&&0<this.anchorNode.p.x+this.anchorNode.w&&(this.ya(new n.fb(this.anchorNode)),this.anchorNode.p.x=b.shiftKey?this.anchorNode.p.x-this.Ob:this.anchorNode.p.x-this.Nb,this.anchorNode instanceof
z.Ba&&this.anchorNode.ib(),this.P=!0)}};a.prototype.zd=function(b){"keyup"==b.type?this.yd(b):"keydown"==b.type&&this.xd(b);this.P&&this.sa()};a.prototype.Ub=function(){if(this.Ra){if(this.vc){this.vc=!1;var b=new z.Node("-1",new f.h(0,0),1,1);b.id=this.Ra.id;this.ya(new n.jc(b))}this.wc=!1;this.Ra=null}this.ta&&(this.ta=null,this.tb&&(this.tb=!1,b=new u.Aa("-1",new f.h(0,0),new f.h(0,0),0),b.id=this.id,this.ya(new n.Eb(b))),this.Kb=!1)};a.prototype.Ac=function(){if(this.A){var b=this,h=function(t){b.uc(t);
t.stopPropagation()};this.A.onclick=h;this.A.ondblclick=h;this.A.onmousedown=h;this.A.onmouseup=h;this.A.onmousemove=h;document.addEventListener("mouseup",function(){b.Ub()});h=function(t){"f12"!=t.key.toLowerCase()&&(t.preventDefault(),b.zd(t),t.stopPropagation())};this.A.parentElement&&(document.onkeydown=h,document.onkeyup=h)}};return a}();x.Lc=y});
define("layer/Action",["require","exports","core/base/BaseBean","core/base/Node","util/CommonUtil"],function(y,x,f,u,z){Object.defineProperty(x,"__esModule",{value:!0});x.Oc=x.Eb=x.Nc=x.fb=x.jc=x.Pc=x.nd=void 0;y=function(){function n(e){this.type=e}n.prototype.back=function(){};return n}();x.nd=y;var r=function(n){function e(a){var b=n.call(this,1)||this;b.zc=[];b.Gc=[];b.n=a;if(b.n instanceof u.Ba){a=0;for(var h=b.n.ga.length;a<h;a++){var t=b.n.ga[a];t.fromPoint&&b.zc.push(new f.Xa(t.fromPoint.x,
t.fromPoint.y,t.fromPoint.O))}a=0;for(h=b.n.fa.length;a<h;a++)t=b.n.fa[a],t.D&&b.Gc.push(new f.Xa(t.D.x,t.D.y,t.D.O))}return b}Y(e,n);e.prototype.back=function(a){a.Fa(this.n);if(this.n instanceof u.Ba){a=this.zc.length;for(var b=0,h=this.n.ga.length;b<h;b++){var t=this.n.ga[b];a>b&&this.n.lc(t,this.zc[b])}a=this.Gc.length;b=0;for(h=this.n.fa.length;b<h;b++)t=this.n.fa[b],a>b&&this.n.Tc(t,this.Gc[b])}};return e}(y);x.Pc=r;r=function(n){function e(a){var b=n.call(this,11)||this;b.n=a;return b}Y(e,
n);e.prototype.back=function(a){for(var b=0,h=a.I.length;b<h;b++)if(a.I[b].id==this.n.id){a.tc(a.I[b]);break}};return e}(y);x.jc=r;r=function(n){function e(a){var b=n.call(this,12)||this;a=z.K.Bb(a);b.n=a;return b}Y(e,n);e.prototype.back=function(a){for(var b,h=0,t=a.I.length;h<t;h++)if(b=a.I[h],b.id==this.n.id){z.K.oc(b,this.n);b instanceof u.Ba&&b.ib();break}};return e}(y);x.fb=r;r=function(n){function e(a){var b=n.call(this,2)||this;b.line=a;return b}Y(e,n);e.prototype.back=function(a){a.mc(this.line);
this.line.v&&this.line.fromPoint&&this.line.v.lc(this.line,this.line.fromPoint);this.line.u&&this.line.D&&this.line.u.Tc(this.line,this.line.D)};return e}(y);x.Nc=r;r=function(n){function e(a){var b=n.call(this,21)||this;b.line=a;return b}Y(e,n);e.prototype.back=function(a){for(var b=0,h=a.lines.length;b<h;b++)if(a.lines[b].id==this.line.id){a.tc(a.I[b]);break}};return e}(y);x.Eb=r;y=function(n){function e(a){var b=n.call(this,22)||this;b.v=null;b.u=null;b.v=a.v;b.u=a.u;a=z.K.Ab(a);a.fromNode=null;
a.toNode=null;b.line=a;return b}Y(e,n);e.prototype.back=function(a){for(var b=0,h=a.lines.length;b<h;b++)if(a.lines[b].id==this.line.id){z.K.pc(a,a.lines[b],this.line);a.lines[b].v=this.v;a.lines[b].u=this.u;break}};return e}(y);x.Oc=y});
define("core/base/LinkLine","require exports core/base/BaseBean core/base/BaseShape core/base/Node layer/Action util/CommonUtil".split(" "),function(y,x,f,u,z,r,n){Object.defineProperty(x,"__esModule",{value:!0});x.kc=x.Aa=void 0;y=function(){function e(a,b,h,t,w){this.Y="21";this.m=20;this.Qa=100;this.Ua=20;this.Uc=new f.h(0,0);this.i=[];this.wb=null;this.type=0;this.lineWidth=2;this.strokeStyle="#000";this.D=this.u=this.fromPoint=this.v=this.oa=null;this.da={};this.id=a;this.from=b;this.g=h;this.type=
t;this.J=new u.$b(this.g,10,14,3);this.J.M=!1;this.J.H=!0;this.Zb=new f.h(this.from.x,this.from.y);this.Hb=new f.h(this.from.x,this.from.y);this.ra(w);this.ja()}e.prototype.clone=function(){return new e(n.K.V(),new f.h(this.from.x,this.from.y),new f.h(this.g.x,this.g.y),this.type)};e.prototype.Jd=function(){this.i[0]||(this.i[0]=new f.h(this.from.x+(this.g.x-this.from.x)/2,this.from.y));this.i[1]||(this.i[1]=new f.h(this.i[0].x,this.g.y));var a=!1,b=!1;if(this.fromPoint&&this.v)switch(this.fromPoint.O){case 0:this.g.y>
this.from.y?(this.i[0].x=this.from.x+(this.g.x-this.from.x)/2,this.i[0].y=this.from.y-this.Qa):(this.i[0].x=this.from.x,this.i[0].y=this.from.y+(this.g.y-this.from.y)/2);a=!0;break;case 1:this.g.x<this.from.x?(this.i[0].x=this.from.x+this.Qa,this.i[0].y=this.from.y+(this.g.y-this.from.y)/2):(this.i[0].x=this.from.x+(this.g.x-this.from.x)/2,this.i[0].y=this.from.y);a=!0;break;case 2:this.g.y<this.from.y?(this.i[0].x=this.from.x+(this.g.x-this.from.x)/2,this.i[0].y=this.from.y+this.Qa):(this.i[0].x=
this.from.x,this.i[0].y=this.from.y+(this.g.y-this.from.y)/2);a=!0;break;case 3:this.g.x>this.from.x?(this.i[0].x=this.from.x-this.Qa,this.i[0].y=this.from.y+(this.g.y-this.from.y)/2):(this.i[0].x=this.from.x+(this.g.x-this.from.x)/2,this.i[0].y=this.from.y),a=!0}if(this.D&&this.u)switch(this.D.O){case 0:this.g.y<this.from.y?(this.from.x>this.g.x?this.i[1].x=this.g.x+this.u.w/2:this.i[1].x=this.g.x-this.u.w/2,this.i[1].y=this.g.y-this.Qa):(this.i[1].x=this.g.x,this.i[1].y=this.g.y+(this.from.y-this.g.y)/
2);b=!0;break;case 1:this.g.x>this.from.x?(this.i[1].x=this.g.x+this.Qa,this.from.y>this.g.y?this.i[1].y=this.g.y+this.u.w/2:this.i[1].y=this.g.y-this.u.w/2):(this.i[1].x=this.g.x+(this.from.x-this.g.x)/2,this.i[1].y=this.g.y);b=!0;break;case 2:this.g.y>this.from.y?(this.from.x>this.g.x?this.i[1].x=this.g.x+this.u.w/2:this.i[1].x=this.g.x-this.u.w/2,this.i[1].y=this.g.y+this.Qa):(this.i[1].x=this.g.x,this.i[1].y=this.g.y+(this.from.y-this.g.y)/2);b=!0;break;case 3:this.g.x<this.from.x?(this.i[1].x=
this.g.x-this.Qa,this.from.y>this.g.y?this.i[1].y=this.g.y+this.u.w/2:this.i[1].y=this.g.y-this.u.w/2):(this.i[1].x=this.g.x+(this.from.x-this.g.x)/2,this.i[1].y=this.g.y),b=!0}a||(this.i[0].x=this.from.x+(this.g.x-this.from.x)/2,this.i[0].y=this.from.y);b||(this.i[1].x=this.g.x+(this.from.x-this.g.x)/2,this.i[1].y=this.g.y)};e.prototype.Ld=function(){if(this.v&&this.fromPoint)if(this.g.y<=this.from.y)if(this.D&&this.u)switch(this.D.O){case 0:var a=this.g.y-this.m;this.i.push(new f.h(this.from.x,
a));this.i.push(new f.h(this.g.x,a));break;case 1:this.from.x>=this.g.x?this.i.push(new f.h(this.from.x,this.g.y)):(a=this.u.p.y+this.u.j,a=a<this.from.y?this.from.y-Math.min(this.m,(this.from.y-a)/2):this.u.p.y-this.m,this.i.push(new f.h(this.from.x,a)),this.i.push(new f.h(this.g.x+this.m,a)),this.i.push(new f.h(this.g.x+this.m,this.g.y)));break;case 2:a=this.g.y+(this.from.y-this.g.y)/2;this.i.push(new f.h(this.from.x,a));this.i.push(new f.h(this.g.x,a));break;case 3:this.from.x<=this.g.x?this.i.push(new f.h(this.from.x,
this.g.y)):(a=this.u.p.y+this.u.j,a=a<this.from.y?this.from.y-Math.min(this.m,(this.from.y-a)/2):this.u.p.y-this.m,this.i.push(new f.h(this.from.x,a)),this.i.push(new f.h(this.g.x-this.m,a)),this.i.push(new f.h(this.g.x-this.m,this.g.y)))}else this.i.push(new f.h(this.from.x,this.g.y)),this.J.ha=this.g.x>this.from.x?3:1;else if(this.D&&this.u)switch(this.D.O){case 0:a=this.from.y-this.m;this.i.push(new f.h(this.from.x,a));this.i.push(new f.h(this.g.x,a));break;case 1:a=this.from.y-this.m;var b=this.g.x<
this.v.p.x?this.g.x+Math.min(this.m,(this.v.p.x-this.g.x)/2):Math.max(this.g.x,this.v.p.x+this.v.w)+this.m;this.i.push(new f.h(this.from.x,a));this.i.push(new f.h(b,a));this.i.push(new f.h(b,this.g.y));break;case 2:this.from.x>=this.g.x?(b=this.u.p.x+this.u.w,this.v.p.x>b?b+=(this.v.p.x-b)/2:b=Math.min(this.u.p.x,this.v.p.x)-this.m):(b=this.v.p.x+this.v.w,b=this.u.p.x>b?b+(this.u.p.x-b)/2:Math.max(this.u.p.x+this.u.w,this.v.p.x+this.v.w)+this.m);this.i.push(new f.h(this.from.x,this.from.y-this.m));
this.i.push(new f.h(b,this.from.y-this.m));this.i.push(new f.h(b,this.g.y+this.m));this.i.push(new f.h(this.g.x,this.g.y+this.m));break;case 3:b=this.v.p.x+this.v.w,b=this.g.x<=b?Math.min(this.g.x,this.v.p.x)-this.m:this.g.x-Math.min((this.g.x-b)/2,this.m),this.i.push(new f.h(this.from.x,this.from.y-this.m)),this.i.push(new f.h(b,this.from.y-this.m)),this.i.push(new f.h(b,this.g.y))}else a=this.from.y-this.m,this.i.push(new f.h(this.from.x,a)),this.i.push(new f.h(this.g.x,a)),this.J.ha=0};e.prototype.Nd=
function(){if(this.v&&this.fromPoint)if(this.g.y>=this.from.y)if(this.D&&this.u)switch(this.D.O){case 0:var a=this.from.y+(this.g.y-this.from.y)/2;this.i.push(new f.h(this.from.x,a));this.i.push(new f.h(this.g.x,a));break;case 1:this.from.x>=this.g.x?this.i.push(new f.h(this.from.x,this.g.y)):(a=this.v.p.y+this.v.j,a=a<this.u.p.y?this.from.y+Math.min(this.m,(this.u.p.y-a)/2):this.u.p.y+this.u.j+this.m,this.i.push(new f.h(this.from.x,a)),this.i.push(new f.h(this.g.x+this.m,a)),this.i.push(new f.h(this.g.x+
this.m,this.g.y)));break;case 2:a=this.g.y+this.m;this.i.push(new f.h(this.from.x,a));this.i.push(new f.h(this.g.x,a));break;case 3:this.from.x<=this.g.x?this.i.push(new f.h(this.from.x,this.g.y)):(a=this.v.p.y+this.v.j,a=a<this.u.p.y?this.from.y+Math.min(this.m,(this.u.p.y-a)/2):this.u.p.y+this.u.j+this.m,this.i.push(new f.h(this.from.x,a)),this.i.push(new f.h(this.g.x-this.m,a)),this.i.push(new f.h(this.g.x-this.m,this.g.y)))}else this.i.push(new f.h(this.from.x,this.g.y)),this.J.ha=this.g.x>this.from.x?
3:1;else if(this.D&&this.u)switch(this.D.O){case 0:if(this.from.x>=this.g.x){var b=this.u.p.x+this.u.w;this.v.p.x>b?b+=(this.v.p.x-b)/2:b=Math.min(this.u.p.x,this.v.p.x)-this.m}else b=this.v.p.x+this.v.w,b=this.u.p.x>b?b+(this.u.p.x-b)/2:Math.max(this.u.p.x+this.u.w,this.v.p.x+this.v.w)+this.m;this.i.push(new f.h(this.from.x,this.from.y+this.m));this.i.push(new f.h(b,this.from.y+this.m));this.i.push(new f.h(b,this.g.y-this.m));this.i.push(new f.h(this.g.x,this.g.y-this.m));break;case 1:a=this.from.y+
this.m;b=this.g.x<this.v.p.x?this.g.x+Math.min(this.m,(this.v.p.x-this.g.x)/2):Math.max(this.g.x,this.v.p.x+this.v.w)+this.m;this.i.push(new f.h(this.from.x,a));this.i.push(new f.h(b,a));this.i.push(new f.h(b,this.g.y));break;case 2:a=this.from.y+this.m;this.i.push(new f.h(this.from.x,a));this.i.push(new f.h(this.g.x,a));break;case 3:b=this.v.p.x+this.v.w,a=this.from.y+this.m,b=this.g.x<=b?Math.min(this.g.x,this.v.p.x)-this.m:this.g.x-Math.min((this.g.x-b)/2,this.m),this.i.push(new f.h(this.from.x,
a)),this.i.push(new f.h(b,a)),this.i.push(new f.h(b,this.g.y))}else a=this.from.y+this.m,this.i.push(new f.h(this.from.x,a)),this.i.push(new f.h(this.g.x,a)),this.J.ha=2};e.prototype.Md=function(){if(this.v&&this.fromPoint)if(this.g.y<=this.from.y)if(this.D&&this.u)switch(this.D.O){case 0:var a=this.from.x<this.u.p.x?this.from.x+Math.min(this.m,(this.u.p.x-this.from.x)/2):Math.max(this.from.x,this.u.p.x+this.u.w)+this.m;var b=this.g.y-this.m;this.i.push(new f.h(a,this.from.y));this.i.push(new f.h(a,
b));this.i.push(new f.h(this.g.x,b));break;case 1:a=Math.max(this.from.x,this.g.x)+this.m;this.i.push(new f.h(a,this.from.y));this.i.push(new f.h(a,this.g.y));break;case 2:this.g.x>=this.from.x?this.i.push(new f.h(this.g.x,this.from.y)):(b=this.g.y<this.v.p.y?this.g.y+Math.min((this.v.p.y-this.g.y)/2,this.m):this.v.p.y+this.v.j+this.m,a=this.from.x+this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,b)),this.i.push(new f.h(this.g.x,b)));break;case 3:this.from.x<=this.g.x?(a=this.from.x+
(this.g.x-this.from.x)/2,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y))):(b=this.u.p.y+this.u.j,b<this.v.p.y?b+=(this.v.p.y-b)/2:b=Math.min(this.u.p.y,this.v.p.y)-this.m,a=this.from.x+this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,b)),a=this.g.x-this.m,this.i.push(new f.h(a,b)),this.i.push(new f.h(a,this.g.y)))}else a=this.from.x+this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y)),this.J.ha=this.g.x>a?3:1;else if(this.D&&this.u)switch(this.D.O){case 0:this.from.x<=
this.g.x?this.i.push(new f.h(this.g.x,this.from.y)):(b=this.v.p.y+this.v.j,b=b<this.g.y?this.g.y-Math.min(this.m,(this.g.y-b)/2):this.v.p.y-this.m,a=this.from.x+this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,b)),this.i.push(new f.h(this.g.x,b)));break;case 1:a=Math.max(this.g.x,this.from.x)+this.m;this.i.push(new f.h(a,this.from.y));this.i.push(new f.h(a,this.g.y));break;case 2:a=this.from.x<this.u.p.x?this.from.x+Math.min(this.m,(this.u.p.x-this.from.x)/2):Math.max(this.from.x,
this.u.p.x+this.u.w)+this.m;b=this.g.y+this.m;this.i.push(new f.h(a,this.from.y));this.i.push(new f.h(a,b));this.i.push(new f.h(this.g.x,b));break;case 3:this.from.x<=this.g.x?(a=this.from.x+(this.g.x-this.from.x)/2,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y))):(b=this.v.p.y+this.v.j,b=b<this.u.p.y?b+(this.u.p.y-b)/2:Math.min(this.u.p.y+this.u.j,this.v.p.y+this.v.j)+this.m,a=this.from.x+this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,b)),a=this.g.x-this.m,
this.i.push(new f.h(a,b)),this.i.push(new f.h(a,this.g.y)))}else a=this.from.x+this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y)),this.J.ha=this.g.x>a?3:1};e.prototype.Od=function(){if(this.v&&this.fromPoint)if(this.g.y<=this.from.y)if(this.D&&this.u)switch(this.D.O){case 0:var a=this.u.p.x+this.u.w;a=this.from.x>a?this.from.x-Math.min(this.m,(this.from.x-a)/2):Math.min(this.from.x,this.u.p.x)-this.m;var b=this.g.y-this.m;this.i.push(new f.h(a,this.from.y));this.i.push(new f.h(a,
b));this.i.push(new f.h(this.g.x,b));break;case 1:this.from.x>this.g.x?(a=this.g.x+(this.from.x-this.g.x)/2,this.i.push(new f.h(a,this.from.y))):(b=this.u.p.y+this.u.j,b=b<this.v.p.y?b+(this.v.p.y-b)/2:Math.max(this.u.p.y+this.u.j,this.v.p.y+this.v.j)+this.m,a=this.from.x-this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,b)),a=this.g.x+this.m,this.i.push(new f.h(a,b)));this.i.push(new f.h(a,this.g.y));break;case 2:this.g.x<=this.from.x?this.i.push(new f.h(this.g.x,this.from.y)):(b=
this.g.y<this.v.p.y?this.g.y+Math.min((this.v.p.y-this.g.y)/2,this.m):this.v.p.y+this.v.j+this.m,a=this.from.x-this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,b)),this.i.push(new f.h(this.g.x,b)));break;case 3:a=Math.min(this.from.x,this.g.x)-this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y))}else a=this.from.x-this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y)),this.J.ha=this.g.x>a?3:1;else if(this.D&&this.u)switch(this.D.O){case 0:this.from.x>=
this.g.x?this.i.push(new f.h(this.g.x,this.from.y)):(b=this.v.p.y+this.v.j,b=b<this.g.y?this.g.y-Math.min(this.m,(this.g.y-b)/2):this.v.p.y-this.m,a=this.from.x-this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,b)),this.i.push(new f.h(this.g.x,b)));break;case 1:this.from.x>this.g.x?(a=this.g.x+(this.from.x-this.g.x)/2,this.i.push(new f.h(a,this.from.y))):(b=this.v.p.y+this.v.j,b<this.u.p.y?b+=(this.u.p.y-b)/2:b=Math.min(this.u.p.y,this.v.p.y)-this.m,a=this.from.x-this.m,this.i.push(new f.h(a,
this.from.y)),this.i.push(new f.h(a,b)),a=this.g.x+this.m,this.i.push(new f.h(a,b)));this.i.push(new f.h(a,this.g.y));break;case 2:a=this.u.p.x+this.u.w;a=this.from.x>a?this.from.x-Math.min(this.m,(this.from.x-a)/2):Math.min(this.from.x,this.u.p.x)-this.m;b=this.g.y+this.m;this.i.push(new f.h(a,this.from.y));this.i.push(new f.h(a,b));this.i.push(new f.h(this.g.x,b));break;case 3:a=Math.min(this.from.x,this.g.x)-this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y))}else a=this.from.x-
this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y)),this.J.ha=this.g.x>a?3:1};e.prototype.Kd=function(){this.i.length=0;if(this.fromPoint&&this.v)switch(this.fromPoint.O){case 0:this.Ld();break;case 1:this.Md();break;case 2:this.Nd();break;case 3:this.Od()}else if(this.D&&this.u)switch(this.D.O){case 0:if(this.g.y>this.from.y)this.from.x!=this.g.x&&this.i.push(new f.h(this.g.x,this.from.y));else{var a=this.g.y-this.m;this.i.push(new f.h(this.from.x,a));this.i.push(new f.h(this.g.x,
a))}break;case 1:this.g.x<this.from.x?this.from.y!=this.g.y&&this.i.push(new f.h(this.from.x,this.g.y)):(a=this.g.x+this.m,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y)));break;case 2:this.g.y<this.from.y?this.from.x!=this.g.x&&this.i.push(new f.h(this.g.x,this.from.y)):(a=this.g.y+this.m,this.i.push(new f.h(this.from.x,a)),this.i.push(new f.h(this.g.x,a)));break;case 3:this.g.x>this.from.x?this.from.y!=this.g.y&&this.i.push(new f.h(this.from.x,this.g.y)):(a=this.g.x-this.m,
this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y)))}else this.from.x!=this.g.x&&this.from.y!=this.g.y&&(a=this.from.x+(this.g.x-this.from.x)/2,this.i.push(new f.h(a,this.from.y)),this.i.push(new f.h(a,this.g.y)))};e.prototype.ra=function(a){if(a)this.i=a;else switch(this.type){case 0:this.Kd();break;case 2:this.Jd();break;case 3:this.i[0]?(this.i[0].x=this.from.x,this.i[0].y=this.g.y):this.i[0]=new f.h(this.from.x,this.g.y)}this.Sd()};e.prototype.Sd=function(){for(var a=[this.from.x,
this.g.x],b=[this.from.y,this.g.y],h=0;h<this.i.length;h++){var t=this.i[h];a.push(t.x);b.push(t.y)}this.Zb.x=Math.min.apply(null,a);this.Zb.y=Math.min.apply(null,b);this.Hb.x=Math.max.apply(null,a);this.Hb.y=Math.max.apply(null,b)};e.prototype.show=function(a){a.lineWidth=this.lineWidth;a.strokeStyle=this.strokeStyle;switch(this.type){case 0:var b=this.g.x,h=this.g.y;switch(this.J.ha){case 1:b+=this.J.j;break;case 2:h+=this.J.j;break;case 3:b-=this.J.j;break;default:h-=this.J.j}a.beginPath();a.moveTo(this.from.x,
this.from.y);if(0<this.i.length)for(var t=0;t<this.i.length;t++){var w=this.i[t];a.lineTo(w.x,w.y)}a.lineTo(b,h);this.wb=null;a.stroke();a.closePath();break;case 2:if(1<this.i.length){h=this.g.x;t=this.g.y;switch(this.J.ha){case 1:h+=this.J.j;break;case 2:t+=this.J.j;break;case 3:h-=this.J.j;break;default:t-=this.J.j}b=new Path2D;b.moveTo(this.from.x,this.from.y);b.bezierCurveTo(this.i[0].x,this.i[0].y,this.i[1].x,this.i[1].y,h,t);this.wb=b;a.stroke(b)}break;case 3:if(0<this.i.length){h=this.g.x;
t=this.g.y;switch(this.J.ha){case 1:h+=this.J.j;break;case 2:t+=this.J.j;break;case 3:h-=this.J.j;break;default:t-=this.J.j}b=new Path2D;b.moveTo(this.from.x,this.from.y);b.quadraticCurveTo(this.i[0].x,this.i[0].y,h,t);this.wb=b;a.stroke(b)}}this.J.sa(a,this.Uc)};e.prototype.onclick=function(a){var b=!1;a.Tb?(a.za=this,a.anchorNode&&a.anchorNode instanceof z.Ba&&(a.anchorNode.ld(),a.P=!0,a.anchorNode=null),b=!0):a.za=null;return b};e.prototype.ondblclick=function(){return!1};e.prototype.onmousedown=
function(a){if(!a.A||!a.S)return!1;var b=a.G.x,h=a.G.y,t=!1;Math.abs(b-this.from.x)<this.Ua&&Math.abs(h-this.from.y)<this.Ua?(this.oa=this.from,t=!0):Math.abs(b-this.g.x)<this.Ua&&Math.abs(h-this.g.y)<this.Ua&&(this.oa=this.g,t=!0);if(t)return a.ta=this,!0;a.ta==this&&(a.ta=null);this.oa=null;return!1};e.prototype.onmouseup=function(a){var b=!1;if(a.ta==this){if(this.oa){if(this.oa==this.from||this.oa==this.g){b=a.G.x;for(var h=a.G.y,t=!1,w=a.I.length-1;-1<w;w--){var A=a.I[w];if(A instanceof z.Ba)for(var B=
0;B<A.ia.length;B++){var D=A.ia[B];if(Math.abs(A.p.x+D.l.x-b)<D.jb&&Math.abs(A.p.y+D.l.y-h)<D.jb){t=!0;this.oa==this.from?A.Rc(this,D.l,D.O):A.Sc(this,D.l,D.O);break}}}t||(this.oa==this.from?this.v&&this.v.rc(this):this.u&&this.u.sc(this));a.P=!0}a.tb&&(a.tb=!1,b=new e("-1",new f.h(0,0),new f.h(0,0),0),b.id=this.id,a.ya(new r.Eb(b)))}b=!0}a.Kb=!1;this.oa=null;a.ta=null;a.qa.v=null;a.qa.fromPoint=null;return b};e.prototype.Ta=function(a){var b=a.G.x,h=a.G.y;if(1==a.yc&&this.oa){if(!a.Kb){a.Kb=!0;var t=
new e("-1",new f.h(0,0),new f.h(0,0),0);t.id=this.id;a.ya(new r.Oc(t))}this.oa.x=b;this.oa.y=h;this.oa!=this.g&&this.u||(1==this.J.ha&&this.g.x>this.from.x?this.J.ha=3:3==this.J.ha&&this.g.x<this.from.x&&(this.J.ha=1));this.ra();return a.P=!0}return!1};e.prototype.onmousemove=function(a){if(!a.A||!a.S)return!1;var b=a.G.x,h=a.G.y,t=!1;Math.abs(b-this.from.x)<this.Ua&&Math.abs(h-this.from.y)<this.Ua?t=!0:Math.abs(b-this.g.x)<this.Ua&&Math.abs(h-this.g.y)<this.Ua&&(t=!0);if(t)a.A.style.cursor!=f.ea.move&&
(a.A.style.cursor=f.ea.move);else{if(0==this.type){b=this.from;if(0<this.i.length)for(h=0;h<this.i.length;h++){var w=this.i[h];if(t=this.cd(a.G,b,w))break;b=w}t||(t=this.cd(a.G,b,this.g))}else 2==this.type&&(w=window.devicePixelRatio,this.wb&&a.S.isPointInStroke(this.wb,b*w,h*w)&&(t=!0));t&&a.A.style.cursor!=f.ea.Jb&&(a.A.style.cursor=f.ea.Jb)}t?a.Tb=this:a.Tb=null;return t};e.prototype.cd=function(a,b,h){var t;void 0===t&&(t=3);var w=!1;if(b.x!=h.x){var A=Math.min(b.x,h.x),B=Math.max(b.x,h.x);if(a.x>=
A&&a.x<=B){var D=b.y;if(b.y!=h.y){var H=A==b.x?b:h;b=H==b?h:b;D=(a.x-H.x)*(b.y-H.y)/(b.x-H.x);D=H.y+D}a.x>=A&&a.x<=B&&Math.abs(a.y-D)<=t&&(w=!0)}}else b.y!=h.y&&(A=Math.min(b.y,h.y),B=Math.max(b.y,h.y),a.y>=A&&a.y<=B&&Math.abs(a.x-b.x)<=t&&(w=!0));return w};e.prototype.na=function(a){if(1==a.yc&&this.oa&&a.Lb==f.ca.ed)return this.Ta(a),!0;if(a.Lb==f.ca.fd)return this.onmouseup(a);var b=a.G.x,h=a.G.y;return b>=this.Zb.x&&h>=this.Zb.y&&b<=this.Hb.x&&h<=this.Hb.y&&(b=this.da["on"+a.Lb])?b.call(this,
a):!1};e.prototype.ja=function(){this.da.onclick=this.onclick;this.da.ondblclick=this.ondblclick;this.da.onmousedown=this.onmousedown;this.da.onmouseup=this.onmouseup;this.da.onmousemove=this.onmousemove;this.da.ondragmousemove=this.Ta};return e}();x.Aa=y;y=function(e){function a(b,h,t,w,A){b=e.call(this,b,h,t,w,A)||this;b.Y="22";b.o=new u.Fb(null,new f.h(0,0),[],80);b.o.qc=!1;b.o.Fd=!0;b.o.fillStyle="#9966FF";b.o.strokeStyle="#9966FF";return b}Y(a,e);a.prototype.ondblclick=function(b){if(b.Tb!=this)return!1;
this.Ec();if(b.L){b.L.textContent="";if(0<this.o.text.length)for(var h=0;h<this.o.text.length;h++){var t=this.o.text[h],w=document.createElement("div");t?w.textContent=t:w.innerHTML="<br>";b.L.appendChild(w)}b.Sa.x=this.o.l.x;b.Sa.y=this.o.l.y;b.L.style.top=this.o.l.y+"px";b.L.style.left=this.o.l.x+"px";b.L.style.fontSize=this.o.fontSize+"px";b.L.style.fontFamily=this.o.fontFamily;b.L.style.color=this.o.fillStyle;b.L.style.visibility="visible";b.L.focus();if(h=window.getSelection())h.selectAllChildren(b.L),
h.collapseToEnd();this.o.C=!1;b.La=this;b.$a=null;b.P=!0;b.mb.x=b.L.offsetWidth;b.mb.y=b.L.offsetHeight;return!0}return!1};a.prototype.ra=function(b){e.prototype.ra.call(this,b);this.o&&0<this.o.text.length&&this.Ec()};a.prototype.Ec=function(){if(this.o)switch(this.type){case 0:this.Rd();break;case 2:this.Pd()}};a.prototype.Rd=function(){if(0==this.i.length)this.from.x==this.g.x?(this.o.l.x=this.from.x,this.o.l.y=this.from.y+(this.g.y-this.from.y)/2):(this.o.l.y=this.from.y,this.o.l.x=this.from.x+
(this.g.x-this.from.x)/2);else{for(var b=this.from,h=0,t=[],w=0,A=this.i.length;w<A;w++){var B=this.i[w];h=B.x==b.x?h+Math.abs(B.y-b.y):h+Math.abs(B.x-b.x);t[w]=h;b=B}h=this.g.x==b.x?h+Math.abs(this.g.y-b.y):h+Math.abs(this.g.x-b.x);h/=2;b=0;for(A=t.length;b<A&&!(t[b]>h);b++);0==b?(A=this.from,w=this.i[0]):(A=this.i[b-1],w=b<this.i.length?this.i[b]:this.g,h-=t[b-1]);A.x==w.x?(this.o.l.x=A.x,w.y>A.y?this.o.l.y=A.y+h:this.o.l.y=A.y-h):(this.o.l.y=A.y,w.x>A.x?this.o.l.x=A.x+h:this.o.l.x=A.x-h);this.o.l.x-=
this.o.Ma/2;this.o.l.y-=this.o.Pb/2}};a.prototype.Pd=function(){var b=this.g.x,h=this.g.y;switch(this.J.ha){case 1:b+=this.J.j;break;case 2:h+=this.J.j;break;case 3:b-=this.J.j;break;default:h-=this.J.j}this.o.l.x=.125*this.from.x+.375*this.i[0].x+.375*this.i[1].x+.125*b;this.o.l.y=.125*this.from.y+.375*this.i[0].y+.375*this.i[1].y+.125*h;this.o.l.x-=this.o.Ma/2;this.o.l.y-=this.o.Pb/2};a.prototype.show=function(b){e.prototype.show.call(this,b);this.o&&this.o.C&&0<this.o.text.length&&this.o.sa(b,
this.Uc)};a.prototype.clone=function(){var b=new a(n.K.V(),new f.h(this.from.x,this.from.y),new f.h(this.g.x,this.g.y),this.type);b.o.Cb(this.o.text.slice(0));return b};return a}(y);x.kc=y});
define("core/base/Node",["require","exports","core/base/BaseBean","core/base/BaseShape","util/CommonUtil"],function(y,x,f,u,z){Object.defineProperty(x,"__esModule",{value:!0});x.Ya=x.Ba=x.Node=void 0;y=function(){function r(n,e,a,b){this.Y="1";this.lb=new f.h(0,0);this.xb=new f.h(0,0);this.nb=[];this.da={};this.id=n;this.p=e;this.w=a;this.j=b;this.ja()}r.prototype.pd=function(n){this.nb.push(n)};r.prototype.gb=function(n){this.nb.splice(0,0,n)};r.prototype.show=function(n){if(this.nb)for(var e=0;e<
this.nb.length;e++)this.nb[e].C&&this.nb[e].sa(n,this.p)};r.prototype.na=function(n,e){(e=this.da[e])&&e.call(this,n)};r.prototype.onmousedown=function(n){var e=n.G.x,a=n.G.y;this.xb.x=e;this.xb.y=a;this.lb.x=this.p.x-e;this.lb.y=this.p.y-a;n.Ra=this};r.prototype.Ta=function(n){var e=n.G.y;this.p.x=n.G.x+this.lb.x;this.p.y=e+this.lb.y;n.P=!0};r.prototype.scale=function(n,e){this.w=n;this.j=e};r.prototype.ja=function(){this.da.onmousedown=this.onmousedown;this.da.ondragmousemove=this.Ta};r.prototype.clone=
function(){return new r(z.K.V(),new f.h(this.p.x,this.p.y),this.w,this.j)};return r}();x.Node=y;y=function(r){function n(e,a,b,h){e=r.call(this,e,a,b,h)||this;e.ce=4;e.Vb=6;e.Wb=.5*e.Vb;e.Xb=1.5*e.Vb;e.zb="#990000";e.Na=[];e.ia=[];e.X="#FF3300";e.W=4;e.Ga=0;e.ma=20;e.ga=[];e.fa=[];e.cb=new f.h(1,1);a=e.Vb;e.kb=new u.Rect(new f.h(0,0),e.w,e.j,e.zb);e.Va=new u.Rect(new f.h(-a/2,-a/2),a,a,e.zb);e.Pa=new u.Rect(new f.h(b-a/2,-a/2),a,a,e.zb);e.Ja=new u.Rect(new f.h(-a/2,h-a/2),a,a,e.zb);e.Ka=new u.Rect(new f.h(b-
a/2,h-a/2),a,a,e.zb);e.kb.H=!1;e.kb.C=!1;e.Va.H=!0;e.Va.C=!1;e.Va.fillStyle="#FFFFFF";e.Pa.H=!0;e.Pa.C=!1;e.Pa.fillStyle="#FFFFFF";e.Ja.H=!0;e.Ja.C=!1;e.Ja.fillStyle="#FFFFFF";e.Ka.H=!0;e.Ka.C=!1;e.Ka.fillStyle="#FFFFFF";e.Na.push(e.kb);e.Na.push(e.Va);e.Na.push(e.Pa);e.Na.push(e.Ja);e.Na.push(e.Ka);return e}Y(n,r);n.prototype.clone=function(){return new n(z.K.V(),new f.h(this.p.x,this.p.y),this.w,this.j)};n.prototype.lc=function(e,a){this.Rc(e,a,a.O)};n.prototype.Rc=function(e,a,b){void 0===b&&(b=
0);e.v&&e.v==this||(e.v&&e.v.rc(e),e.v=this);e.fromPoint=new f.Xa(a.x,a.y,b);e.from.x=this.p.x+a.x;e.from.y=this.p.y+a.y;e.ra();0>this.ga.indexOf(e)&&this.ga.push(e)};n.prototype.rc=function(e){e=this.ga.indexOf(e);0<=e&&this.ga.splice(e,1)};n.prototype.Tc=function(e,a){this.Sc(e,a,a.O)};n.prototype.Sc=function(e,a,b){void 0===b&&(b=0);e.u&&e.u==this||(e.u&&e.u.sc(e),e.u=this);e.D=new f.Xa(a.x,a.y,b);e.g.x=this.p.x+a.x;e.g.y=this.p.y+a.y;e.J.ha=b;e.ra();0>this.fa.indexOf(e)&&this.fa.push(e)};n.prototype.sc=
function(e){e=this.fa.indexOf(e);0<=e&&this.fa.splice(e,1)};n.prototype.show=function(e){r.prototype.show.call(this,e);if(this.Na)for(var a=0;a<this.Na.length;a++)this.Na[a].C&&this.Na[a].sa(e,this.p);if(this.ia)for(a=0;a<this.ia.length;a++)this.ia[a].C&&this.ia[a].sa(e,this.p)};n.prototype.ob=function(e){e&&0<e.length&&(this.ia=e)};n.prototype.onmouseenter=function(e){e.anchorNode!=this&&(this.Zc(),e.P=!0)};n.prototype.onmouseleave=function(e){e.anchorNode!=this&&(this.$c(),e.P=!0)};n.prototype.Sb=
function(e){this.ld();this.$c();e.P=!0};n.prototype.Rb=function(e){this.Vd();this.Zc();e.P=!0};n.prototype.onmousemove=function(e){if(e.A){this.Ga=0;var a=e.G.x-this.p.x,b=e.G.y-this.p.y;if(a>this.Ka.l.x-this.Wb&&b>this.Ka.l.y-this.Wb)this.Ga=3,e.A.style.cursor!=f.ea.Yb&&(e.A.style.cursor=f.ea.Yb);else if(a<this.Va.l.x+this.Xb&&b<this.Va.l.y+this.Xb)this.Ga=1,e.A.style.cursor!=f.ea.Yb&&(e.A.style.cursor=f.ea.Yb);else if(a>this.Pa.l.x-this.Wb&&b<this.Pa.l.y+this.Xb)this.Ga=2,e.A.style.cursor!=f.ea.Qb&&
(e.A.style.cursor=f.ea.Qb);else if(a<this.Ja.l.x+this.Xb&&b>this.Ja.l.y-this.Wb)this.Ga=4,e.A.style.cursor!=f.ea.Qb&&(e.A.style.cursor=f.ea.Qb);else if(0<this.ia.length)for(var h=0;h<this.ia.length;h++){var t=this.ia[h];if(Math.abs(a-t.l.x)<t.jb&&Math.abs(b-t.l.y)<t.jb){this.Ga=5;e.A.style.cursor!=f.ea.Jb&&(e.A.style.cursor=f.ea.Jb);break}}0==this.Ga&&e.A.style.cursor!=f.ea.move&&(e.A.style.cursor=f.ea.move)}};n.prototype.onmousedown=function(e){var a=e.G.x-this.p.x,b=e.G.y-this.p.y;if(0<this.ia.length)for(var h=
0;h<this.ia.length;h++){var t=this.ia[h];if(Math.abs(a-t.l.x)<t.jb&&Math.abs(b-t.l.y)<t.jb){e.qa.v=this;e.qa.fromPoint=new f.Xa(t.l.x,t.l.y,t.O);return}}r.prototype.onmousedown.call(this,e)};n.prototype.Ta=function(e){0==this.Ga?(r.prototype.Ta.call(this,e),this.ib()):5>this.Ga&&(this.Wd(e.G,this.xb)&&(e.P=!0),this.xb.x=e.G.x,this.xb.y=e.G.y)};n.prototype.Vd=function(){this.kb.C=!0;this.Va.C=!0;this.Pa.C=!0;this.Ja.C=!0;this.Ka.C=!0};n.prototype.ld=function(){this.kb.C=!1;this.Va.C=!1;this.Pa.C=!1;
this.Ja.C=!1;this.Ka.C=!1};n.prototype.Zc=function(){for(var e=0;e<this.ia.length;e++)this.ia[e].C=!0};n.prototype.$c=function(){for(var e=0;e<this.ia.length;e++)this.ia[e].C=!1};n.prototype.Wd=function(e,a){switch(this.Ga){case 1:var b=e.x;e=e.y;if(b>this.p.x+this.w-this.ma||e>this.p.y+this.j-this.ma)return!1;var h=b-a.x,t=e-a.y;this.p.x+=h;this.p.y+=t;h=this.w-h;t=this.j-t;if(h<this.ma||t<this.ma)return!1;this.scale(h,t);break;case 2:b=e.x;e=e.y;if(b<this.p.x+this.ma||e>this.p.y+this.j-this.ma)return!1;
t=e-a.y;this.p.y+=t;h=this.w+b-a.x;t=this.j-t;a.x=b;a.y=e;if(h<this.ma||t<this.ma)return!1;this.scale(h,t);break;case 3:b=e.x;e=e.y;if(b<this.p.x+this.ma||e<this.p.y+this.ma)return!1;h=this.w+b-a.x;t=this.j+e-a.y;a.x=b;a.y=e;if(h<this.ma||t<this.ma)return!1;this.scale(h,t);break;case 4:b=e.x;e=e.y;if(b>this.p.x+this.w-this.ma||e<this.p.y+this.ma)return!1;h=b-a.x;this.p.x+=h;h=this.w-h;t=this.j+e-a.y;a.x=b;a.y=e;if(h<this.ma||t<this.ma)return!1;this.scale(h,t);break;default:return!1}return!0};n.prototype.scale=
function(e,a){this.cb.x=e/this.w;this.cb.y=a/this.j;r.prototype.scale.call(this,e,a);e=this.Vb;this.kb.scale(this.w,this.j,!1);this.Pa.N(this.w-e/2,-e/2);this.Ja.N(-e/2,this.j-e/2);this.Ka.N(this.w-e/2,this.j-e/2);0<this.ia.length&&this.Za();this.nc()};n.prototype.ib=function(){if(0<this.ga.length)for(var e=0;e<this.ga.length;e++){var a=this.ga[e];a.fromPoint&&(a.from.x=this.p.x+a.fromPoint.x,a.from.y=this.p.y+a.fromPoint.y,a.ra())}if(0<this.fa.length)for(e=0;e<this.fa.length;e++)a=this.fa[e],a.D&&
(a.g.x=this.p.x+a.D.x,a.g.y=this.p.y+a.D.y,a.ra())};n.prototype.nc=function(){if(0<this.ga.length)for(var e=0;e<this.ga.length;e++){var a=this.ga[e];a.fromPoint&&(a.fromPoint.x*=this.cb.x,a.fromPoint.y*=this.cb.y,a.from.x=this.p.x+a.fromPoint.x,a.from.y=this.p.y+a.fromPoint.y,a.ra())}if(0<this.fa.length)for(e=0;e<this.fa.length;e++)a=this.fa[e],a.D&&(a.D.x*=this.cb.x,a.D.y*=this.cb.y,a.g.x=this.p.x+a.D.x,a.g.y=this.p.y+a.D.y,a.ra())};n.prototype.Za=function(){};n.prototype.ja=function(){r.prototype.ja.call(this);
this.da.onmouseenter=this.onmouseenter;this.da.onmouseleave=this.onmouseleave;this.da.onunanchor=this.Sb;this.da.onanchor=this.Rb;this.da.onmousemove=this.onmousemove};return n}(y);x.Ba=y;y=function(r){function n(e,a,b,h,t){e=r.call(this,e,a,b,h)||this;e.o=new u.Fb(e,new f.h(0,0),t?t:[],e.w);e.o.H=!0;e.o.M=!1;e.o.fillStyle="#000000";e.pd(e.o);return e}Y(n,r);n.prototype.clone=function(){return new n(z.K.V(),new f.h(this.p.x,this.p.y),this.w,this.j,this.o?this.o.text.slice(0):[])};n.prototype.Cb=function(e){var a;
null===(a=this.o)||void 0===a?void 0:a.Cb(e)};n.prototype.scale=function(e,a){r.prototype.scale.call(this,e,a);this.o&&this.o.scale(this.o.w*this.cb.x)};n.prototype.ondblclick=function(e){if(e.R){if(0<this.o.text.length){e.R.textContent="";for(var a=0;a<this.o.text.length;a++){var b=this.o.text[a],h=document.createElement("div");b?h.textContent=b:h.innerHTML="<br>";e.R.appendChild(h)}}else e.R.textContent="";e.R.style.top=this.p.y+this.o.l.y+"px";e.R.style.left=this.p.x+"px";e.R.style.width=this.o.w+
"px";e.R.style.minHeight=this.j-this.o.l.y+"px";e.R.style.fontSize=this.o.fontSize+"px";e.R.style.fontFamily=this.o.fontFamily;e.R.style.visibility="visible";e.R.focus();if(a=window.getSelection())a.selectAllChildren(e.R),a.collapseToEnd();this.o.C=!1;e.$a=this;e.La=null;e.P=!0}};return n}(y);x.Ya=y});
define("core/base/BaseShape",["require","exports","core/base/Pen"],function(y,x,f){Object.defineProperty(x,"__esModule",{value:!0});x.Fb=x.U=x.Kc=x.fc=x.bc=x.Rect=x.pb=x.Qc=x.$b=void 0;y=function(u){function z(r,n,e,a){void 0===a&&(a=0);var b=u.call(this)||this;b.va=[5,5];b.xa=[];b.wa=!1;b.ha=0;b.Y="32";b.w=n;b.j=e;b.Wa=n/2;b.be=e/2;b.l=r;b.ha=a;return b}Y(z,u);z.prototype.show=function(r,n){if(r&&(this.H||this.M)){r.beginPath();r.lineCap="square";this.wa?r.setLineDash(this.va):r.setLineDash(this.xa);
switch(this.ha){case 1:var e=this.l.y+this.Wa;var a=this.l.x+this.j;var b=this.l.y-this.Wa;var h=this.l.x+this.j;break;case 2:e=this.l.y+this.j;a=this.l.x+this.Wa;b=this.l.y+this.j;h=this.l.x-this.Wa;break;case 3:e=this.l.y+this.Wa;a=this.l.x-this.j;b=this.l.y-this.Wa;h=this.l.x-this.j;break;default:e=this.l.y-this.j,a=this.l.x-this.Wa,b=this.l.y-this.j,h=this.l.x+this.Wa}r.moveTo(n.x+this.l.x,n.y+this.l.y);r.lineTo(n.x+a,n.y+e);r.lineTo(n.x+h,n.y+b);r.closePath();this.H&&r.fill();this.M&&r.stroke()}};
return z}(f.Ha);x.$b=y;y=function(u){function z(r,n,e){var a=u.call(this)||this;a.va=[5,5];a.xa=[];a.wa=!1;a.Y="33";a.l=r;a.jd=n;a.kd=e;return a}Y(z,u);z.prototype.show=function(r,n){r&&(this.H||this.M)&&(r.beginPath(),r.lineCap="square",this.wa?r.setLineDash(this.va):r.setLineDash(this.xa),r.moveTo(n.x+this.l.x,n.y+this.l.y),r.lineTo(n.x+this.jd.x,n.y+this.jd.y),r.lineTo(n.x+this.kd.x,n.y+this.kd.y),this.H&&r.fill(),this.M&&r.stroke(),r.closePath())};return z}(f.Ha);x.Qc=y;y=function(u){function z(r){var n=
u.call(this)||this;n.va=[5,5];n.xa=[];n.wa=!1;n.F=[];n.lineCap="square";n.lineJoin="miter";n.Y="34";n.F=r;return n}Y(z,u);z.prototype.show=function(r,n){if(r&&(this.H||this.M)&&this.F&&1<this.F.length){r.beginPath();r.lineCap=this.lineCap;r.lineJoin=this.lineJoin;this.wa?r.setLineDash(this.va):r.setLineDash(this.xa);for(var e=0,a=this.F.length;e<a;e++)0==e?r.moveTo(n.x+this.F[0].x,n.y+this.F[0].y):r.lineTo(n.x+this.F[e].x,n.y+this.F[e].y),e+2<a&&1==this.F[e].type&&1==this.F[e+1].type&&1==this.F[e+
2].type&&(e+3<a&&1==this.F[e+3].type?(r.bezierCurveTo(n.x+this.F[e+1].x,n.y+this.F[e+1].y,n.x+this.F[e+2].x,n.y+this.F[e+2].y,n.x+this.F[e+3].x,n.y+this.F[e+3].y),e+=3):(r.quadraticCurveTo(n.x+this.F[e+1].x,n.y+this.F[e+1].y,n.x+this.F[e+2].x,n.y+this.F[e+2].y),e+=2));this.H&&r.fill();this.M&&r.stroke();r.closePath()}};return z}(f.Ha);x.pb=y;y=function(u){function z(r,n,e,a){var b=u.call(this)||this;b.va=[5,5];b.xa=[];b.wa=!1;b.Y="35";b.l=r;b.w=n;b.j=e;a&&(b.strokeStyle=a);return b}Y(z,u);z.prototype.show=
function(r,n){r&&(this.H||this.M)&&this.l&&this.w&&this.j&&(r.beginPath(),r.lineCap="square",this.wa?r.setLineDash(this.va):r.setLineDash(this.xa),this.H&&r.fillRect(n.x+this.l.x,n.y+this.l.y,this.w,this.j),this.M&&r.strokeRect(n.x+this.l.x,n.y+this.l.y,this.w,this.j),r.closePath())};z.prototype.scale=function(r,n,e){void 0===e&&(e=!0);e?(this.w=this.w*r,this.j=this.j*n):(this.w=r,this.j=n)};z.prototype.N=function(r,n){this.l.x=r;this.l.y=n};return z}(f.Ha);x.Rect=y;y=function(u){function z(r,n,e,
a){var b=u.call(this)||this;b.T=0;b.va=[5,5];b.xa=[];b.wa=!1;b.Y="36";b.l=r;b.w=n;b.j=e;r=Math.min(n,e);a&&a<r&&(b.T=a);0>=b.T&&(b.T=r/3);return b}Y(z,u);z.prototype.show=function(r,n){if(r&&(this.H||this.M)&&this.l&&this.w&&this.j){r.beginPath();r.lineCap="round";this.wa?r.setLineDash(this.va):r.setLineDash(this.xa);var e=n.x+this.l.x;n=n.y+this.l.y;r.moveTo(e+this.T,n);r.lineTo(e+this.w-this.T,n);r.quadraticCurveTo(e+this.w,n,e+this.w,n+this.T);r.lineTo(e+this.w,n+this.j-this.T);r.quadraticCurveTo(e+
this.w,n+this.j,e+this.w-this.T,n+this.j);r.lineTo(e+this.T,n+this.j);r.quadraticCurveTo(e,n+this.j,e,n+this.j-this.T);r.lineTo(e,n+this.T);r.quadraticCurveTo(e,n,e+this.T,n);this.H&&r.fill();this.M&&r.stroke();r.closePath()}};z.prototype.scale=function(r,n,e,a){void 0===e&&(e=!0);e?(this.w=this.w*r,this.j=this.j*n,a&&(this.T=this.T*a)):(this.w=r,this.j=n,a&&(this.T=a))};z.prototype.N=function(r,n){this.l.x=r;this.l.y=n};return z}(f.Ha);x.bc=y;y=function(u){function z(r,n,e,a,b,h,t){void 0===e&&(e=
0);void 0===a&&(a=2*Math.PI);void 0===b&&(b=0);var w=u.call(this)||this;w.va=[5,5];w.xa=[];w.wa=!1;w.Y="37";w.l=r;w.T=n;w.Fc=e;w.xc=a;w.rotation=b;h&&(w.strokeStyle=h);t&&(w.lineWidth=t);return w}Y(z,u);z.prototype.show=function(r,n){r&&(this.H||this.M)&&(r.beginPath(),r.lineCap="round",this.wa?r.setLineDash(this.va):r.setLineDash(this.xa),r.ellipse(n.x+this.l.x,n.y+this.l.y,this.T.x,this.T.y,this.rotation,this.Fc,this.xc),this.H&&r.fill(),this.M&&r.stroke(),r.closePath())};z.prototype.N=function(r,
n){this.l.x=r;this.l.y=n};return z}(f.Ha);x.fc=y;y=function(u){function z(r,n,e,a,b,h){void 0===e&&(e=0);void 0===a&&(a=2*Math.PI);var t=u.call(this)||this;t.va=[5,5];t.xa=[];t.wa=!1;t.Y="38";t.l=r;t.T=n;t.Fc=e;t.xc=a;b&&(t.strokeStyle=b);h&&(t.lineWidth=h);return t}Y(z,u);z.prototype.show=function(r,n){r&&(this.H||this.M)&&(r.beginPath(),r.lineCap="round",this.wa?r.setLineDash(this.va):r.setLineDash(this.xa),r.arc(n.x+this.l.x,n.y+this.l.y,this.T,this.Fc,this.xc),this.H&&r.fill(),this.M&&r.stroke(),
r.closePath())};z.prototype.scale=function(r,n){void 0===n&&(n=!0);n?(r=this.T*r,this.l.x=this.l.x+r-this.T,this.l.y=this.l.y+r-this.T,this.T=r):(this.l.x=this.l.x+r-this.T,this.l.y=this.l.y+r-this.T,this.T=r)};z.prototype.N=function(r,n){this.l.x=r;this.l.y=n};return z}(f.Ha);x.Kc=y;y=function(u){function z(r,n,e,a,b,h,t){void 0===e&&(e=0);void 0===a&&(a=2*Math.PI);void 0===b&&(b=0);r=u.call(this,r,n,e,a,h,t)||this;r.Y="39";r.O=b;r.jb=2*n;return r}Y(z,u);return z}(y);x.U=y;f=function(u){function z(r,
n,e,a){var b=u.call(this)||this;b.eb=[];b.Ea=[];b.vb=!1;b.fontSize=20;b.fontFamily="Microsoft YaHei";b.Dc=0;b.Cc=.3;b.qc=!0;b.Fd=!0;b.Xd=0;b.Ma=0;b.Pb=0;b.Y="391";b.parent=r;b.l=n;b.text=e;b.w=a;b.H=!0;b.M=!1;b.md();return b}Y(z,u);z.prototype.Cb=function(r){this.vb=!1;this.text=r};z.prototype.bd=function(r){if(!this.vb){this.vb=!0;this.Pb=this.Ma=0;var n=this.eb;n.length=0;this.Ea.length=0;if(0<this.text.length){for(var e=0;e<this.text.length;e++){var a=this.text[e];if(a){var b=r.measureText(a).width;
if(this.qc){var h=a.length;this.Xd=b;var t=Math.floor(this.w/(b/h));b=0;for(var w,A,B;b<h;){w=b+Math.min(h-b,t);A=a.substring(b,w);B=r.measureText(A).width;if(B>this.w)for(;b<w&&B>this.w;)w--,A=a.substring(b,w),B=r.measureText(A).width;else if(B<this.w)for(var D,H;w<h;)if(w++,H=a.substring(b,w),D=r.measureText(A).width,D<this.w)A=H,B=D;else if(D==this.w){A=H;B=D;break}else if(D>this.w){w--;break}n.push(A);B>this.Ma&&(this.Ma=B);B>=this.w?this.Ea.push(0):this.Ea.push((this.w-B)/2);b=w}}else n.push(a),
b>this.Ma&&(this.Ma=b),this.Ea.push(b)}else n.push(""),this.Ea.push(0)}this.Pb=(n.length-1)*(this.fontSize*(1+this.Cc)+this.Dc)+this.fontSize;if(!this.qc)for(b=0,r=this.Ea.length;b<r;b++)this.Ea[b]=this.Ea[b]>=this.Ma?0:(this.Ma-this.Ea[b])/2}this.md()}};z.prototype.md=function(){if(this.parent){var r=this.fontSize*(1+this.Cc)+this.Dc,n=this.fontSize;1<this.eb.length&&(n=this.fontSize+(this.eb.length-1)*r);n<this.parent.j?(this.l.y=(this.parent.j-n)/2-5,0>this.l.y&&(this.l.y=0)):this.l.y=0}};z.prototype.show=
function(r,n){if(r&&(this.H||this.M)&&(r.font=this.fontSize+"px "+this.fontFamily,this.vb||this.bd(r),this.text)){r.beginPath();var e=this.fontSize*(1+this.Cc)+this.Dc;if(this.H)for(var a=this.fontSize,b=0;b<this.eb.length;b++)r.fillText(this.eb[b],n.x+this.l.x+this.Ea[b],n.y+this.l.y+a),a+=e;if(this.M)for(a=this.fontSize,b=0;b<this.eb.length;b++)r.strokeText(this.eb[b],n.x+this.l.x+this.Ea[b],n.y+this.l.y+a),a+=e;r.closePath()}};z.prototype.scale=function(r){this.w=r;this.vb=!1};z.prototype.N=function(r,
n){this.l.x=r;this.l.y=n};return z}(f.Ha);x.Fb=f});
define("process/ProcProc","require exports core/base/BaseBean core/base/BaseShape core/base/Node util/CommonUtil".split(" "),function(y,x,f,u,z,r){Object.defineProperty(x,"__esModule",{value:!0});x.ec=x.hc=x.cc=x.dc=x.ac=x.ic=void 0;y=function(n){function e(a,b,h,t,w,A){void 0===w&&(w=[]);void 0===A&&(A=!1);a=n.call(this,a,b,h,t,w)||this;a.sb="\u8fc7\u7a0b";a.qb=null;a.bb=!1;a.Y="11";b=2*Math.PI;a.ba=new u.U(new f.h(a.w/2,0),a.W,0,b,0,a.X,1);a.aa=new u.U(new f.h(a.w,a.j/2),a.W,0,b,1,a.X,1);a.Z=new u.U(new f.h(a.w/
2,a.j),a.W,0,b,2,a.X,1);a.$=new u.U(new f.h(0,a.j/2),a.W,0,b,3,a.X,1);a.ba.C=!1;a.aa.C=!1;a.Z.C=!1;a.$.C=!1;a.ob([a.ba,a.aa,a.Z,a.$]);a.Da(A);return a}Y(e,n);e.prototype.clone=function(){return new e(r.K.V(),new f.h(this.p.x,this.p.y),this.w,this.j,this.o?this.o.text:[])};e.prototype.Da=function(a){var b=new u.Rect(new f.h(0,0),this.w,this.j);this.gb(b);this.qb=b;a?(b.H=!0,b.M=!1,b.fillStyle="#0099FF"):(b.H=!1,b.M=!0,b.strokeStyle="#000000",b.lineWidth=2)};e.prototype.scale=function(a,b){var h;n.prototype.scale.call(this,
a,b);null===(h=this.qb)||void 0===h?void 0:h.scale(a,b,!1)};e.prototype.Za=function(){this.ba.N(this.w/2,0);this.aa.N(this.w,this.j/2);this.Z.N(this.w/2,this.j);this.$.N(0,this.j/2)};e.prototype.ondblclick=function(a){n.prototype.ondblclick.call(this,a)};e.prototype.ja=function(){n.prototype.ja.call(this);this.da.ondblclick=this.ondblclick};return e}(z.Ya);x.ic=y;y=function(n){function e(a,b,h,t,w,A){void 0===w&&(w=[]);void 0===A&&(A=!1);a=n.call(this,a,b,h,t,w)||this;a.sb="\u5f00\u59cb/\u7ed3\u675f";
a.qb=null;a.bb=!1;a.Y="12";b=2*Math.PI;a.ba=new u.U(new f.h(a.w/2,0),a.W,0,b,0,a.X,1);a.aa=new u.U(new f.h(a.w,a.j/2),a.W,0,b,1,a.X,1);a.Z=new u.U(new f.h(a.w/2,a.j),a.W,0,b,2,a.X,1);a.$=new u.U(new f.h(0,a.j/2),a.W,0,b,3,a.X,1);a.ba.C=!1;a.aa.C=!1;a.Z.C=!1;a.$.C=!1;a.ob([a.ba,a.aa,a.Z,a.$]);a.Da(A);return a}Y(e,n);e.prototype.clone=function(){return new e(r.K.V(),new f.h(this.p.x,this.p.y),this.w,this.j,this.o?this.o.text:[])};e.prototype.Da=function(a){var b=new u.bc(new f.h(0,0),this.w,this.j);
this.gb(b);this.qb=b;a?(b.H=!0,b.M=!1,b.fillStyle="#0099FF"):(b.H=!1,b.M=!0,b.strokeStyle="#000000",b.lineWidth=2)};e.prototype.scale=function(a,b){var h;n.prototype.scale.call(this,a,b);null===(h=this.qb)||void 0===h?void 0:h.scale(a,b,!1)};e.prototype.Za=function(){this.ba.N(this.w/2,0);this.aa.N(this.w,this.j/2);this.Z.N(this.w/2,this.j);this.$.N(0,this.j/2)};e.prototype.ondblclick=function(a){n.prototype.ondblclick.call(this,a)};e.prototype.ja=function(){n.prototype.ja.call(this);this.da.ondblclick=
this.ondblclick};return e}(z.Ya);x.ac=y;y=function(n){function e(a,b,h,t,w,A){void 0===w&&(w=[]);void 0===A&&(A=!1);a=n.call(this,a,b,h,t,w)||this;a.sb="\u51b3\u7b56";a.B=null;a.bb=!1;a.Y="13";b=2*Math.PI;a.ba=new u.U(new f.h(a.w/2,0),a.W,0,b,0,a.X,1);a.aa=new u.U(new f.h(a.w,a.j/2),a.W,0,b,1,a.X,1);a.Z=new u.U(new f.h(a.w/2,a.j),a.W,0,b,2,a.X,1);a.$=new u.U(new f.h(0,a.j/2),a.W,0,b,3,a.X,1);a.ba.C=!1;a.aa.C=!1;a.Z.C=!1;a.$.C=!1;a.ob([a.ba,a.aa,a.Z,a.$]);a.Da(A);return a}Y(e,n);e.prototype.clone=
function(){return new e(r.K.V(),new f.h(this.p.x,this.p.y),this.w,this.j,this.o?this.o.text:[])};e.prototype.Da=function(a){var b=new f.la(this.w/2,0);this.B=new u.pb([b,new f.la(this.w,this.j/2),new f.la(this.w/2,this.j),new f.la(0,this.j/2),b]);this.gb(this.B);a?(this.B.H=!0,this.B.M=!1,this.B.fillStyle="#0099FF"):(this.B.H=!1,this.B.M=!0,this.B.strokeStyle="#000000",this.B.lineWidth=2)};e.prototype.scale=function(a,b){n.prototype.scale.call(this,a,b);this.B&&(this.B.F[0].x=this.w/2,this.B.F[1].x=
this.w,this.B.F[1].y=this.j/2,this.B.F[2].x=this.w/2,this.B.F[2].y=this.j,this.B.F[3].y=this.j/2)};e.prototype.Za=function(){this.ba.N(this.w/2,0);this.aa.N(this.w,this.j/2);this.Z.N(this.w/2,this.j);this.$.N(0,this.j/2)};e.prototype.ondblclick=function(a){n.prototype.ondblclick.call(this,a)};e.prototype.ja=function(){n.prototype.ja.call(this);this.da.ondblclick=this.ondblclick};return e}(z.Ya);x.dc=y;y=function(n){function e(a,b,h,t,w,A){void 0===w&&(w=[]);void 0===A&&(A=!1);a=n.call(this,a,b,h,
t,w)||this;a.sb="\u9875\u9762\u5185\u5f15\u7528";a.B=null;a.bb=!1;a.Y="14";b=2*Math.PI;a.ba=new u.U(new f.h(a.w/2,0),a.W,0,b,0,a.X,1);a.aa=new u.U(new f.h(a.w,a.j/2),a.W,0,b,1,a.X,1);a.Z=new u.U(new f.h(a.w/2,a.j),a.W,0,b,2,a.X,1);a.$=new u.U(new f.h(0,a.j/2),a.W,0,b,3,a.X,1);a.ba.C=!1;a.aa.C=!1;a.Z.C=!1;a.$.C=!1;a.ob([a.ba,a.aa,a.Z,a.$]);a.Da(A);return a}Y(e,n);e.prototype.clone=function(){return new e(r.K.V(),new f.h(this.p.x,this.p.y),this.w,this.j,this.o?this.o.text:[])};e.prototype.Da=function(a){var b=
new f.h(this.w/2,this.j/2);this.B=new u.fc(b,b);this.gb(this.B);a?(this.B.H=!0,this.B.M=!1,this.B.fillStyle="#0099FF"):(this.B.H=!1,this.B.M=!0,this.B.strokeStyle="#000000",this.B.lineWidth=2)};e.prototype.scale=function(a,b){n.prototype.scale.call(this,a,b);this.B&&(this.B.l.x=this.w/2,this.B.l.y=this.j/2)};e.prototype.Za=function(){this.ba.N(this.w/2,0);this.aa.N(this.w,this.j/2);this.Z.N(this.w/2,this.j);this.$.N(0,this.j/2)};e.prototype.ondblclick=function(a){n.prototype.ondblclick.call(this,
a)};e.prototype.ja=function(){n.prototype.ja.call(this);this.da.ondblclick=this.ondblclick};return e}(z.Ya);x.cc=y;y=function(n){function e(a,b,h,t,w,A){void 0===w&&(w=[]);void 0===A&&(A=!1);a=n.call(this,a,b,h,t,w)||this;a.sb="\u6570\u636e";a.B=null;a.bb=!1;a.Y="15";b=2*Math.PI;h=a.j/a.w;h=h/(1+h)*a.w/4;a.o&&(a.o.l.x=2*h,a.o.w=a.w-4*h);a.ba=new u.U(new f.h(a.w/2,0),a.W,0,b,0,a.X,1);a.aa=new u.U(new f.h(a.w-h,a.j/2),a.W,0,b,1,a.X,1);a.Z=new u.U(new f.h(a.w/2,a.j),a.W,0,b,2,a.X,1);a.$=new u.U(new f.h(h,
a.j/2),a.W,0,b,3,a.X,1);a.ba.C=!1;a.aa.C=!1;a.Z.C=!1;a.$.C=!1;a.ob([a.ba,a.aa,a.Z,a.$]);a.Da(A);return a}Y(e,n);e.prototype.clone=function(){return new e(r.K.V(),new f.h(this.p.x,this.p.y),this.w,this.j,this.o?this.o.text:[])};e.prototype.Da=function(a){var b=this.j/this.w;b=b/(1+b)*this.w/2;var h=new f.la(b,0);this.B=new u.pb([h,new f.la(this.w,0),new f.la(this.w-b,this.j),new f.la(0,this.j),h]);this.gb(this.B);a?(this.B.H=!0,this.B.M=!1,this.B.fillStyle="#0099FF"):(this.B.H=!1,this.B.M=!0,this.B.strokeStyle=
"#000000",this.B.lineWidth=2)};e.prototype.scale=function(a,b){n.prototype.scale.call(this,a,b);a=this.j/this.w;a=a/(1+a)*this.w/2;this.B&&(this.B.F[0].x=a,this.B.F[1].x=this.w,this.B.F[2].x=this.w-a,this.B.F[2].y=this.j,this.B.F[3].y=this.j);this.o&&(this.o.l.x=a,this.o.w=this.w-2*a)};e.prototype.nc=function(){n.prototype.nc.call(this);var a=this.j/this.w;a=a/(1+a)*this.w/2;if(0<this.ga.length)for(var b=0;b<this.ga.length;b++){var h=this.ga[b];!h.fromPoint||1!=h.fromPoint.O&&3!=h.fromPoint.O||(1==
h.fromPoint.O?h.fromPoint.x=this.w-h.fromPoint.y/this.j*a:3==h.fromPoint.O&&(h.fromPoint.x=(this.j-h.fromPoint.y)/this.j*a),h.from.x=this.p.x+h.fromPoint.x,h.ra())}if(0<this.fa.length)for(b=0;b<this.fa.length;b++)h=this.fa[b],!h.D||1!=h.D.O&&3!=h.D.O||(1==h.D.O?h.D.x=this.w-h.D.y/this.j*a:3==h.D.O&&(h.D.x=(this.j-h.D.y)/this.j*a),h.g.x=this.p.x+h.D.x,h.ra())};e.prototype.Za=function(){var a=this.j/this.w;a=a/(1+a)*this.w/4;this.ba.N(this.w/2,0);this.aa.N(this.w-a,this.j/2);this.Z.N(this.w/2,this.j);
this.$.N(a,this.j/2)};e.prototype.ondblclick=function(a){n.prototype.ondblclick.call(this,a);if(a.R){var b=this.j/this.w;b=b/(1+b)*this.w/2;a.R.style.left=this.p.x+b+"px";a.R.style.width=this.w-2*b+"px"}};e.prototype.ja=function(){n.prototype.ja.call(this);this.da.ondblclick=this.ondblclick};return e}(z.Ya);x.hc=y;z=function(n){function e(a,b,h,t,w,A){void 0===w&&(w=[]);void 0===A&&(A=!1);a=n.call(this,a,b,h,t,w)||this;a.sb="\u6587\u6863";a.B=null;a.bb=!1;a.Y="16";b=2*Math.PI;a.ba=new u.U(new f.h(a.w/
2,0),a.W,0,b,0,a.X,1);a.aa=new u.U(new f.h(a.w,a.j/2),a.W,0,b,1,a.X,1);a.Z=new u.U(new f.h(a.w/2,a.j),a.W,0,b,2,a.X,1);a.$=new u.U(new f.h(0,a.j/2),a.W,0,b,3,a.X,1);a.ba.C=!1;a.aa.C=!1;a.Z.C=!1;a.$.C=!1;a.ob([a.ba,a.aa,a.Z,a.$]);a.Da(A);return a}Y(e,n);e.prototype.clone=function(){return new e(r.K.V(),new f.h(this.p.x,this.p.y),this.w,this.j,this.o?this.o.text:[])};e.prototype.Da=function(a){var b=new f.la(0,this.j,1),h=new f.la(this.w,this.j,1);this.B=new u.pb([b,new f.la(0,0),new f.la(this.w,0),
h,new f.la(this.w/4*3,this.j/4*3,1),new f.la(this.w/4,this.j/4*5,1),b]);this.gb(this.B);a?(this.B.H=!0,this.B.M=!1,this.B.fillStyle="#0099FF"):(this.B.H=!1,this.B.M=!0,this.B.strokeStyle="#000000",this.B.lineWidth=2)};e.prototype.scale=function(a,b){n.prototype.scale.call(this,a,b);this.B&&(this.B.F[0].y=this.j,this.B.F[2].x=this.w,this.B.F[3].x=this.w,this.B.F[3].y=this.j,this.B.F[4].x=this.w/4*3,this.B.F[4].y=this.j/4*3,this.B.F[5].x=this.w/4,this.B.F[5].y=this.j/4*5)};e.prototype.Za=function(){this.ba.N(this.w/
2,0);this.aa.N(this.w,this.j/2);this.Z.N(this.w/2,this.j);this.$.N(0,this.j/2)};e.prototype.ondblclick=function(a){n.prototype.ondblclick.call(this,a)};e.prototype.ja=function(){n.prototype.ja.call(this);this.da.ondblclick=this.ondblclick};return e}(z.Ya);x.ec=z});
define("layer/ModelLayer",["require","exports","core/base/BaseBean","AntLiuApp"],function(y,x,f,u){Object.defineProperty(x,"__esModule",{value:!0});x.Mc=void 0;y=function(){function z(r){this.I=[];this.anchorNode=this.ka=null;this.P=!1;this.Oa=new f.h(1,1);this.bb=!1;this.A=this.S=null;this.Ca=this.ua=0;this.G=new f.h(0,0);this.Bc=this.Td=this.$d=5;this.Id=10;this.gd=20;if(this.id=r)if(r=document.getElementById(r))if(this.ua=r.clientWidth,this.Ca=500,this.A=document.createElement("canvas"),this.A.width=
this.ua,this.A.height=this.Ca,r.appendChild(this.A),this.S=this.A.getContext("2d"))this.S.imageSmoothingEnabled=!0,r=window.devicePixelRatio,this.A.style.width=this.ua+"px",this.A.style.height=this.Ca+"px",this.A.width=this.ua*r,this.A.height=this.Ca*r,this.S.scale(r,r),this.Ac()}z.prototype.Qd=function(){if(this.A)for(var r=this.Bc,n=this.$d,e=!0,a=0;a<this.I.length;a++){var b=this.I[a];e?e=!1:r+b.w+this.Td>this.ua&&(r=this.Bc,n=n+b.j+this.gd);b.p.x=r;b.p.y=n;r=r+b.w+this.Id;r>this.ua&&(e=!0,r=this.Bc,
n=n+b.j+this.gd)}};z.prototype.Fa=function(r){this.I.push(r)};z.prototype.sa=function(){if(this.A&&this.S&&(this.S.clearRect(0,0,this.A.width,this.A.height),0<this.I.length))for(var r=0;r<this.I.length;r++)this.I[r].show(this.S);this.P=!1};z.prototype.uc=function(r){this.G.x=1==this.Oa.x?r.offsetX:r.offsetX/this.Oa.x;this.G.y=1==this.Oa.y?r.offsetY:r.offsetY/this.Oa.y;"mousemove"==r.type?this.Jc(r):"mousedown"==r.type?this.Ic(r):"mouseup"==r.type&&this.ae()};z.prototype.Ub=function(){this.anchorNode&&
(this.anchorNode=null,u.pa&&(u.pa.ub=!1))};z.prototype.ae=function(){this.anchorNode&&(this.anchorNode=null,u.pa&&(u.pa.ub=!1))};z.prototype.Ic=function(r){if(1==r.buttons&&this.I){r=!1;for(var n=this.G.x,e=this.G.y,a=this.I.length-1;-1<a;a--){var b=this.I[a];if(n>b.p.x&&e>b.p.y&&n<b.p.x+b.w&&e<b.p.y+b.j){r=!0;this.anchorNode=b;u.pa&&(u.pa.ub=!0,u.pa.ad=this.anchorNode.Y);break}}!r&&this.anchorNode&&(this.anchorNode=null)}};z.prototype.Jc=function(r){if(1!=r.buttons||!this.anchorNode)if(this.anchorNode&&
(this.anchorNode=null),r=!1,this.I){for(var n=this.G.x,e=this.G.y,a=this.I.length-1;-1<a;a--){var b=this.I[a];if(n>b.p.x&&e>b.p.y&&n<b.p.x+b.w&&e<b.p.y+b.j){r=!0;this.ka?this.ka!=b&&(this.ka=b):this.ka=b;break}}!r&&this.ka&&(this.ka=null)}};z.prototype.Ac=function(){if(this.A){var r=this,n=function(e){r.uc(e);e.stopPropagation()};this.A.onmousedown=n;this.A.onmouseup=n;this.A.onmousemove=n;document.addEventListener("mouseup",function(){r.Ub()})}};return z}();x.Mc=y});
define("AntLiuApp","require exports process/ProcProc core/base/BaseBean layer/ModelLayer layer/DrawLayer util/CommonUtil".split(" "),function(y,x,f,u,z,r,n){function e(){var b=document.getElementById(a.lineBtBsizer);b&&(b.onclick=function(){x.pa&&x.pa.Vc(2)});if(b=document.getElementById(a.lineBtPloy))b.onclick=function(){x.pa&&x.pa.Vc(0)};if(b=document.getElementById(a.canvasImgDownBt))b.onclick=function(){x.pa&&x.pa.Ud()}}Object.defineProperty(x,"__esModule",{value:!0});x.qd=x.Ia=x.pa=void 0;var a=
{};x.qd=function(b,h){if(b=document.getElementById(b)){h&&(a=h);var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;b.style.height=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-100+"px";b.style.width=t+"px";h=document.createElement("div");h.id=n.K.V();h.style.width=t-150-5+"px";h.className="canvasBox";t=document.createElement("div");t.id=n.K.V();t.className="modelBox";b.appendChild(t);b.appendChild(h);x.pa=new r.Lc(h.id);
if(b=document.getElementById(t.id))h=n.K.V(),t=document.createElement("div"),t.id=h,t.style.width="100%",b.appendChild(t),x.Ia=new z.Mc(h),x.Ia.Fa(new f.ic(n.K.V(),new u.h(5,5),40,20)),x.Ia.Fa(new f.ac(n.K.V(),new u.h(5,5),40,20)),x.Ia.Fa(new f.dc(n.K.V(),new u.h(5,5),40,20)),x.Ia.Fa(new f.cc(n.K.V(),new u.h(5,5),20,20)),x.Ia.Fa(new f.hc(n.K.V(),new u.h(5,5),40,20)),x.Ia.Fa(new f.ec(n.K.V(),new u.h(5,5),40,20)),x.Ia.Qd(),x.Ia.sa();e()}}});
